(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{7100:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(6150)}])},6150:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(5507),a=s(3003),n=s.n(a),i=s(7851),l=s(6392),o=s(5041),c=s(6666),d=s(7689),u=(0,d.A)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),m=(0,d.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),f=s(9269),x=i.createElement;function p(){var e,t,s=(0,c.A)().user,a=(0,l.useRouter)(),d=(0,i.useState)([]),p=d[0],g=d[1],h=(0,i.useState)(""),v=h[0],y=h[1],b=(0,i.useState)(""),w=b[0],N=b[1],k=(0,i.useState)("created_at"),C=k[0],_=k[1],A=(0,i.useState)(1),E=A[0],S=A[1];(0,i.useEffect)(function(){if(!s){a.push("/login");return}M()},[s,a,C]);var M=(e=(0,r.A)(n().mark(function e(){var t,r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.N.from("listings").select("*").eq("user_id",null==s?void 0:s.id).order(C,{ascending:"price"===C});case 2:r=(t=e.sent).data,t.error?f.Ay.error("Error fetching listings"):g(r||[]);case 6:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),P=(t=(0,r.A)(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.N.from("listings").delete().eq("id",t);case 2:e.sent.error?f.Ay.error("Error deleting listing"):(f.Ay.success("Listing deleted successfully"),M());case 5:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),j=function(e){a.push("/edit-listing/".concat(e))},L=function(e){a.push("/listings/".concat(e))},D=p.filter(function(e){return e.title.toLowerCase().includes(v.toLowerCase())&&(""===w||e.category===w)}).slice((E-1)*5,5*E),T=Math.ceil(p.length/5);return x("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},x("div",{className:"flex justify-between items-center mb-8"},x("h1",{className:"text-3xl font-bold text-white shadow-sm"},"My Dashboard"),x("button",{onClick:function(){return a.push("/create-listing")},className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"},"Create New Listing")),x("div",{className:"mb-4 flex flex-col md:flex-row md:items-center md:justify-between"},x("div",{className:"flex flex-col md:flex-row md:items-center"},x("input",{type:"text",placeholder:"Search listings...",className:"border border-gray-300 rounded-md p-2 mr-2 mb-2 md:mb-0",value:v,onChange:function(e){return y(e.target.value)}}),x("select",{className:"border border-gray-300 rounded-md p-2 mr-2 mb-2 md:mb-0",value:w,onChange:function(e){return N(e.target.value)}},x("option",{value:""},"All Categories"),x("option",{value:"Call girl"},"Call Girl"),x("option",{value:"Escort Agency"},"Escort Agency"),x("option",{value:"Massage Girls"},"Massage Girls")),x("select",{className:"border border-gray-300 rounded-md p-2",value:C,onChange:function(e){return _(e.target.value)}},x("option",{value:"created_at"},"Sort by Date"),x("option",{value:"price"},"Sort by Price"),x("option",{value:"title"},"Sort by Title")))),x("div",{className:"bg-[#000000c7] shadow overflow-hidden sm:rounded-md"},x("ul",{className:"divide-y divide-gray-200"},D.map(function(e){return x("li",{key:e.id},x("div",{className:"px-4 py-4 sm:px-6 flex items-center"},x("img",{src:e.profile_image,alt:"Profile",className:"h-40 w-40 rounded-md object-cover mr-4"}),x("div",{className:"flex-grow cursor-pointer",onClick:function(){return L(e.id)}},x("div",{className:"flex items-center justify-between"},x("div",{className:"flex-1 min-w-0"},x("h3",{className:"text-white text-2xl font-white font-medium text-gray-900 truncate"},e.title),x("p",{className:"mt-1 text-sm text-white"},e.description)),x("div",{className:"ml-4 flex-shrink-0 flex space-x-4"},x("span",{className:"text-lg font-medium text-white"},"$",e.price),x("button",{onClick:function(){return j(e.id)},className:"text-green-600 hover:text-green-900"},x(u,{className:"h-5 w-5"})),x("button",{onClick:function(){return P(e.id)},className:"text-red-600 hover:text-red-900"},x(m,{className:"h-5 w-5"})))),x("div",{className:"mt-2 sm:flex sm:justify-between"},x("div",{className:"sm:flex"},x("p",{className:"flex items-center text-sm text-white"},e.category)),x("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0"},x("p",null,"Posted on"," ",new Date(e.created_at).toLocaleDateString()),x("span",{className:"ml-2 text-sm font-medium ".concat("approved"===e.status?"text-green-600":"pending"===e.status?"text-yellow-600":"text-red-600")},e.status))))))}))),x("div",{className:"flex justify-between items-center mt-4"},x("button",{disabled:1===E,onClick:function(){return S(E-1)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-300"},"Previous"),x("span",null,"Page ",E," of ",T),x("button",{disabled:E===T,onClick:function(){return S(E+1)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-300"},"Next")))}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7100)),_N_E=e.O()}]);