(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{5070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Headers:()=>i,Request:()=>o,Response:()=>u,default:()=>s,fetch:()=>a});var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw Error("unable to locate global object")}(),a=n.fetch;let s=n.fetch.bind(n);var i=n.Headers,o=n.Request,u=n.Response},350:function(e,t,r){"use strict";var n=r(3003),a=r(6713),s=r(3835),i=r(4063),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(r(5070)),c=o(r(2187)),l=function(){function e(t){s(this,e),this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:"undefined"==typeof fetch?this.fetch=u.default:this.fetch=fetch}return i(e,[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"setHeader",value:function(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}},{key:"then",value:function(e,t){var r,s=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");var i=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((r=a(n.mark(function e(t){var r,a,i,o,u,l,h,f,p,d,v,b,y;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null,u=null,l=null,h=t.status,f=t.statusText,!t.ok){e.next=17;break}if(!("HEAD"!==s.method)){e.next=11;break}return e.next=9,t.text();case 9:""===(p=e.sent)||(u="text/csv"===s.headers.Accept?p:s.headers.Accept&&s.headers.Accept.includes("application/vnd.pgrst.plan+text")?p:JSON.parse(p));case 11:d=null===(r=s.headers.Prefer)||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),v=null===(a=t.headers.get("content-range"))||void 0===a?void 0:a.split("/"),d&&v&&v.length>1&&(l=parseInt(v[1])),s.isMaybeSingle&&"GET"===s.method&&Array.isArray(u)&&(u.length>1?(o={code:"PGRST116",details:"Results contain ".concat(u.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,l=null,h=406,f="Not Acceptable"):u=1===u.length?u[0]:null),e.next=24;break;case 17:return e.next=19,t.text();case 19:b=e.sent;try{o=JSON.parse(b),Array.isArray(o)&&404===t.status&&(u=[],o=null,h=200,f="OK")}catch(e){404===t.status&&""===b?(h=204,f="No Content"):o={message:b}}if(o&&s.isMaybeSingle&&(null===(i=null==o?void 0:o.details)||void 0===i?void 0:i.includes("0 rows"))&&(o=null,h=200,f="OK"),!(o&&s.shouldThrowOnError)){e.next=24;break}throw new c.default(o);case 24:return y={error:o,data:u,count:l,status:h,statusText:f},e.abrupt("return",y);case 26:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}));return this.shouldThrowOnError||(i=i.catch(function(e){var t,r,n;return{error:{message:"".concat(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null==e?void 0:e.message),details:"".concat(null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:""),hint:"",code:"".concat(null!==(n=null==e?void 0:e.code)&&void 0!==n?n:"")},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}}]),e}();t.default=l},2722:function(e,t,r){"use strict";var n=r(4503),a=r(3835),s=r(4063),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(2578)),u=i(r(7760)),c=r(8553),l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.headers,s=r.schema,i=r.fetch;a(this,e),this.url=t,this.headers=Object.assign(Object.assign({},c.DEFAULT_HEADERS),void 0===n?{}:n),this.schemaName=s,this.fetch=i}return s(e,[{key:"from",value:function(e){var t=new URL("".concat(this.url,"/").concat(e));return new o.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}},{key:"schema",value:function(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}},{key:"rpc",value:function(e){var t,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=s.head,o=void 0!==i&&i,c=s.get,l=s.count,h=new URL("".concat(this.url,"/rpc/").concat(e));o||void 0!==c&&c?(t=o?"HEAD":"GET",Object.entries(a).filter(function(e){var t=n(e,2);return void 0!==(t[0],t[1])}).map(function(e){var t=n(e,2),r=t[0],a=t[1];return[r,Array.isArray(a)?"{".concat(a.join(","),"}"):"".concat(a)]}).forEach(function(e){var t=n(e,2),r=t[0],a=t[1];h.searchParams.append(r,a)})):(t="POST",r=a);var f=Object.assign({},this.headers);return l&&(f.Prefer="count=".concat(l)),new u.default({method:t,url:h,headers:f,schema:this.schemaName,body:r,fetch:this.fetch,allowEmpty:!1})}}]),e}();t.default=l},2187:(e,t,r)=>{"use strict";var n=r(4063),a=r(3835),s=r(2275),i=r(4456),o=r(4196),u=r(4897);function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){s(u,e);var t,r=(t=c(),function(){var e,r=o(u);return e=t?Reflect.construct(r,arguments,o(this).constructor):r.apply(this,arguments),i(this,e)});function u(e){var t;return a(this,u),(t=r.call(this,e.message)).name="PostgrestError",t.details=e.details,t.hint=e.hint,t.code=e.code,t}return n(u)}(u(Error));t.default=l},7760:function(e,t,r){"use strict";var n=r(4503),a=r(3835),s=r(4063),i=r(2275),o=r(4456),u=r(4196);function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var h=function(e){i(l,e);var t,r=(t=c(),function(){var e,r=u(l);return e=t?Reflect.construct(r,arguments,u(this).constructor):r.apply(this,arguments),o(this,e)});function l(){return a(this,l),r.apply(this,arguments)}return s(l,[{key:"eq",value:function(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}},{key:"neq",value:function(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}},{key:"gt",value:function(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}},{key:"gte",value:function(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}},{key:"lt",value:function(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}},{key:"lte",value:function(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}},{key:"like",value:function(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}},{key:"likeAllOf",value:function(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}},{key:"likeAnyOf",value:function(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}},{key:"ilike",value:function(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}},{key:"ilikeAllOf",value:function(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}},{key:"ilikeAnyOf",value:function(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}},{key:"is",value:function(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}},{key:"in",value:function(e,t){var r=Array.from(new Set(t)).map(function(e){return"string"==typeof e&&RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)}).join(",");return this.url.searchParams.append(e,"in.(".concat(r,")")),this}},{key:"contains",value:function(e,t){return"string"==typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}},{key:"containedBy",value:function(e,t){return"string"==typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}},{key:"rangeGt",value:function(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}},{key:"rangeGte",value:function(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}},{key:"rangeLt",value:function(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}},{key:"rangeLte",value:function(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}},{key:"rangeAdjacent",value:function(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}},{key:"overlaps",value:function(e,t){return"string"==typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}},{key:"textSearch",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.config,a=r.type,s="";return"plain"===a?s="pl":"phrase"===a?s="ph":"websearch"===a&&(s="w"),this.url.searchParams.append(e,"".concat(s,"fts").concat(void 0===n?"":"(".concat(n,")"),".").concat(t)),this}},{key:"match",value:function(e){var t=this;return Object.entries(e).forEach(function(e){var r=n(e,2),a=r[0],s=r[1];t.url.searchParams.append(a,"eq.".concat(s))}),this}},{key:"not",value:function(e,t,r){return this.url.searchParams.append(e,"not.".concat(t,".").concat(r)),this}},{key:"or",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.foreignTable,n=t.referencedTable,a=void 0===n?r:n;return this.url.searchParams.append(a?"".concat(a,".or"):"or","(".concat(e,")")),this}},{key:"filter",value:function(e,t,r){return this.url.searchParams.append(e,"".concat(t,".").concat(r)),this}}]),l}(l(r(1542)).default);t.default=h},2578:function(e,t,r){"use strict";var n=r(4936),a=r(3835),s=r(4063),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(7760)),u=function(){function e(t,r){var n=r.headers,s=r.schema,i=r.fetch;a(this,e),this.url=t,this.headers=void 0===n?{}:n,this.schema=s,this.fetch=i}return s(e,[{key:"select",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.head,n=t.count,a=!1,s=(null!=e?e:"*").split("").map(function(e){return/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)}).join("");return this.url.searchParams.set("select",s),n&&(this.headers.Prefer="count=".concat(n)),new o.default({method:void 0!==r&&r?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}},{key:"insert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.count,a=t.defaultToNull,s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push("count=".concat(r)),void 0===a||a||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){var i=e.reduce(function(e,t){return e.concat(Object.keys(t))},[]);if(i.length>0){var u=n(new Set(i)).map(function(e){return'"'.concat(e,'"')});this.url.searchParams.set("columns",u.join(","))}}return new o.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}},{key:"upsert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onConflict,a=t.ignoreDuplicates,s=t.count,i=t.defaultToNull,u=["resolution=".concat(void 0!==a&&a?"ignore":"merge","-duplicates")];if(void 0!==r&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&u.push(this.headers.Prefer),s&&u.push("count=".concat(s)),void 0===i||i||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(e)){var c=e.reduce(function(e,t){return e.concat(Object.keys(t))},[]);if(c.length>0){var l=n(new Set(c)).map(function(e){return'"'.concat(e,'"')});this.url.searchParams.set("columns",l.join(","))}}return new o.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.count,n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push("count=".concat(r)),this.headers.Prefer=n.join(","),new o.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.count,r=[];return t&&r.push("count=".concat(t)),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new o.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}]),e}();t.default=u},1542:function(e,t,r){"use strict";var n=r(3835),a=r(4063),s=r(2275),i=r(4456),o=r(4196);function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){s(c,e);var t,r=(t=u(),function(){var e,r=o(c);return e=t?Reflect.construct(r,arguments,o(this).constructor):r.apply(this,arguments),i(this,e)});function c(){return n(this,c),r.apply(this,arguments)}return a(c,[{key:"select",value:function(e){var t=!1,r=(null!=e?e:"*").split("").map(function(e){return/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)}).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}},{key:"order",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ascending,n=t.nullsFirst,a=t.foreignTable,s=t.referencedTable,i=void 0===s?a:s,o=i?"".concat(i,".order"):"order",u=this.url.searchParams.get(o);return this.url.searchParams.set(o,"".concat(u?"".concat(u,","):"").concat(e,".").concat(void 0===r||r?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}},{key:"limit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.foreignTable,n=t.referencedTable,a=void 0===n?r:n;return this.url.searchParams.set(void 0===a?"limit":"".concat(a,".limit"),"".concat(e)),this}},{key:"range",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.foreignTable,a=r.referencedTable,s=void 0===a?n:a,i=void 0===s?"offset":"".concat(s,".offset"),o=void 0===s?"limit":"".concat(s,".limit");return this.url.searchParams.set(i,"".concat(e)),this.url.searchParams.set(o,"".concat(t-e+1)),this}},{key:"abortSignal",value:function(e){return this.signal=e,this}},{key:"single",value:function(){return this.headers.Accept="application/vnd.pgrst.object+json",this}},{key:"maybeSingle",value:function(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}},{key:"csv",value:function(){return this.headers.Accept="text/csv",this}},{key:"geojson",value:function(){return this.headers.Accept="application/geo+json",this}},{key:"explain",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.analyze,n=t.verbose,a=t.settings,s=t.buffers,i=t.wal,o=t.format,u=[void 0!==r&&r?"analyze":null,void 0!==n&&n?"verbose":null,void 0!==a&&a?"settings":null,void 0!==s&&s?"buffers":null,void 0!==i&&i?"wal":null].filter(Boolean).join("|"),c=null!==(e=this.headers.Accept)&&void 0!==e?e:"application/json";return this.headers.Accept="application/vnd.pgrst.plan+".concat(void 0===o?"text":o,'; for="').concat(c,'"; options=').concat(u,";"),this}},{key:"rollback",value:function(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}},{key:"returns",value:function(){return this}}]),c}(c(r(350)).default);t.default=l},8553:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;var n=r(6216);t.DEFAULT_HEADERS={"X-Client-Info":"postgrest-js/".concat(n.version)}},4116:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;var a=n(r(2722));t.PostgrestClient=a.default;var s=n(r(2578));t.PostgrestQueryBuilder=s.default;var i=n(r(7760));t.PostgrestFilterBuilder=i.default;var o=n(r(1542));t.PostgrestTransformBuilder=o.default;var u=n(r(350));t.PostgrestBuilder=u.default;var c=n(r(2187));t.PostgrestError=c.default,t.default={PostgrestClient:a.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:u.default,PostgrestError:c.default}},6216:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},4506:(e,t,r)=>{"use strict";r.d(t,{UU:()=>tq});var n,a,s,i,o,u,c,l,h,f,p,d=r(1525),v=r(4117),b=r(3003),y=r.n(b),g=function(e){var t;return e?t=e:"undefined"==typeof fetch?t=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,5070)).then(function(e){return e.default.apply(void 0,t)})}:t=fetch,function(){return t.apply(void 0,arguments)}},m=r(1597),k=r(7128),w=r(2450),x=r(6166);function _(e){var t=A();return function(){var r,n=(0,w.A)(e);return r=t?Reflect.construct(n,arguments,(0,w.A)(this).constructor):n.apply(this,arguments),(0,k.A)(this,r)}}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(A=function(){return!!e})()}var E=function(e){(0,m.A)(r,e);var t=_(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",s=arguments.length>2?arguments[2]:void 0;return(0,d.A)(this,r),(n=t.call(this,e)).name=a,n.context=s,n}return(0,v.A)(r)}((0,x.A)(Error)),S=function(e){(0,m.A)(r,e);var t=_(r);function r(e){return(0,d.A)(this,r),t.call(this,"Failed to send a request to the Edge Function","FunctionsFetchError",e)}return(0,v.A)(r)}(E),O=function(e){(0,m.A)(r,e);var t=_(r);function r(e){return(0,d.A)(this,r),t.call(this,"Relay Error invoking the Edge Function","FunctionsRelayError",e)}return(0,v.A)(r)}(E),T=function(e){(0,m.A)(r,e);var t=_(r);function r(e){return(0,d.A)(this,r),t.call(this,"Edge Function returned a non-2xx status code","FunctionsHttpError",e)}return(0,v.A)(r)}(E);!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(n||(n={}));var j=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.headers,s=r.customFetch,i=r.region,o=void 0===i?n.Any:i;(0,d.A)(this,e),this.url=t,this.headers=void 0===a?{}:a,this.region=o,this.fetch=g(s)}return(0,v.A)(e,[{key:"setAuth",value:function(e){this.headers.Authorization="Bearer ".concat(e)}},{key:"invoke",value:function(e){var t,r,n,a,s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=this,r=void 0,n=void 0,a=y().mark(function t(){var r,n,a,o,u,c,l,h,f,p;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=i.headers,n=i.method,a=i.body,o={},(u=i.region)||(u=this.region),u&&"any"!==u&&(o["x-region"]=u),a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):"string"==typeof a?(o["Content-Type"]="text/plain",c=a):"undefined"!=typeof FormData&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a))),t.next=9,this.fetch("".concat(this.url,"/").concat(e),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:c}).catch(function(e){throw new S(e)});case 9:if(!((h=(l=t.sent).headers.get("x-relay-error"))&&"true"===h)){t.next=13;break}throw new O(l);case 13:if(l.ok){t.next=15;break}throw new T(l);case 15:if("application/json"!==(f=(null!==(s=l.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim())){t.next=22;break}return t.next=19,l.json();case 19:case 25:case 35:p=t.sent,t.next=41;break;case 22:if("application/octet-stream"!==f){t.next=28;break}return t.next=25,l.blob();case 28:if("text/event-stream"!==f){t.next=32;break}p=l,t.next=41;break;case 32:if("multipart/form-data"!==f){t.next=38;break}return t.next=35,l.formData();case 38:return t.next=40,l.text();case 40:p=t.sent;case 41:return t.abrupt("return",{data:p,error:null});case 44:return t.prev=44,t.t0=t.catch(0),t.abrupt("return",{data:null,error:t.t0});case 47:case"end":return t.stop()}},t,this,[[0,44]])}),new(n||(n=Promise))(function(e,s){function i(e){try{u(a.next(e))}catch(e){s(e)}}function o(e){try{u(a.throw(e))}catch(e){s(e)}}function u(t){var r;t.done?e(t.value):((r=t.value)instanceof n?r:new n(function(e){e(r)})).then(i,o)}u((a=a.apply(t,r||[])).next())})}}]),e}();let{PostgrestClient:P,PostgrestQueryBuilder:C,PostgrestFilterBuilder:R,PostgrestTransformBuilder:I,PostgrestBuilder:N,PostgrestError:L}=r(4116);var U=r(5507),D={"X-Client-Info":"realtime-js/".concat("2.11.2")};!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(a||(a={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(s||(s={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(i||(i={})),(o||(o={})).websocket="websocket",function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(u||(u={}));var B=function(){function e(){(0,d.A)(this,e),this.HEADER_LENGTH=1}return(0,v.A)(e,[{key:"decode",value:function(e,t){return t(e.constructor===ArrayBuffer?this._binaryDecode(e):"string"==typeof e?JSON.parse(e):{})}},{key:"_binaryDecode",value:function(e){var t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}},{key:"_decodeBroadcast",value:function(e,t,r){var n=t.getUint8(1),a=t.getUint8(2),s=this.HEADER_LENGTH+2,i=r.decode(e.slice(s,s+n));s+=n;var o=r.decode(e.slice(s,s+a));return s+=a,{ref:null,topic:i,event:o,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}]),e}(),M=function(){function e(t,r){(0,d.A)(this,e),this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}return(0,v.A)(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}]),e}();!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(c||(c={}));var z=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null!==(r=n.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce(function(r,n){return r[n]=F(n,e,t,a),r},{})},F=function(e,t,r,n){var a=t.find(function(t){return t.name===e}),s=null==a?void 0:a.type,i=r[e];return s&&!n.includes(s)?q(s,i):J(i)},q=function(e,t){if("_"===e.charAt(0))return G(t,e.slice(1,e.length));switch(e){case c.bool:return H(t);case c.float4:case c.float8:case c.int2:case c.int4:case c.int8:case c.numeric:case c.oid:return K(t);case c.json:case c.jsonb:return W(t);case c.timestamp:return V(t);case c.abstime:case c.date:case c.daterange:case c.int4range:case c.int8range:case c.money:case c.reltime:case c.text:case c.time:case c.timestamptz:case c.timetz:case c.tsrange:case c.tstzrange:default:return J(t)}},J=function(e){return e},H=function(e){switch(e){case"t":return!0;case"f":return!1;default:return e}},K=function(e){if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return e},W=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(e){console.log("JSON parse error: ".concat(e))}return e},G=function(e,t){if("string"!=typeof e)return e;var r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){var a,s=e.slice(1,r);try{a=JSON.parse("["+s+"]")}catch(e){a=s?s.split(","):[]}return a.map(function(e){return q(t,e)})}return e},V=function(e){return"string"==typeof e?e.replace(" ","T"):e},$=function(e){var t=e;return(t=(t=t.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")},Y=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;(0,d.A)(this,e),this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}return(0,v.A)(e,[{key:"resend",value:function(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}},{key:"send",value:function(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}},{key:"updatePayload",value:function(e){this.payload=Object.assign(Object.assign({},this.payload),e)}},{key:"receive",value:function(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}},{key:"startTimeout",value:function(){var e=this;this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},function(t){e._cancelRefEvent(),e._cancelTimeout(),e.receivedResp=t,e._matchReceive(t)}),this.timeoutTimer=setTimeout(function(){e.trigger("timeout",{})},this.timeout))}},{key:"trigger",value:function(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}},{key:"destroy",value:function(){this._cancelRefEvent(),this._cancelTimeout()}},{key:"_cancelRefEvent",value:function(){this.refEvent&&this.channel._off(this.refEvent,{})}},{key:"_cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}},{key:"_matchReceive",value:function(e){var t=e.status,r=e.response;this.recHooks.filter(function(e){return e.status===t}).forEach(function(e){return e.callback(r)})}},{key:"_hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}}]),e}(),X=r(6431);!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(l||(l={}));var Z=function(){function e(t,r){var n=this;(0,d.A)(this,e),this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}};var a=(null==r?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},function(t){var r=n.caller,a=r.onJoin,s=r.onLeave,i=r.onSync;n.joinRef=n.channel._joinRef(),n.state=e.syncState(n.state,t,a,s),n.pendingDiffs.forEach(function(t){n.state=e.syncDiff(n.state,t,a,s)}),n.pendingDiffs=[],i()}),this.channel._on(a.diff,{},function(t){var r=n.caller,a=r.onJoin,s=r.onLeave,i=r.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(n.state=e.syncDiff(n.state,t,a,s),i())}),this.onJoin(function(e,t,r){n.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave(function(e,t,r){n.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(function(){n.channel._trigger("presence",{event:"sync"})})}return(0,v.A)(e,[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}],[{key:"syncState",value:function(e,t,r,n){var a=this.cloneDeep(e),s=this.transformState(t),i={},o={};return this.map(a,function(e,t){s[e]||(o[e]=t)}),this.map(s,function(e,t){var r=a[e];if(r){var n=t.map(function(e){return e.presence_ref}),s=r.map(function(e){return e.presence_ref}),u=t.filter(function(e){return 0>s.indexOf(e.presence_ref)}),c=r.filter(function(e){return 0>n.indexOf(e.presence_ref)});u.length>0&&(i[e]=u),c.length>0&&(o[e]=c)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},r,n)}},{key:"syncDiff",value:function(e,t,r,n){var a=this,s={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)},i=s.joins,o=s.leaves;return r||(r=function(){}),n||(n=function(){}),this.map(i,function(t,n){var s=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=a.cloneDeep(n),s.length>0){var i,o,u=e[t].map(function(e){return e.presence_ref}),c=s.filter(function(e){return 0>u.indexOf(e.presence_ref)});(o=e[t]).unshift.apply(o,(0,X.A)(c))}r(t,s,n)}),this.map(o,function(t,r){var a=e[t];if(a){var s=r.map(function(e){return e.presence_ref});a=a.filter(function(e){return 0>s.indexOf(e.presence_ref)}),e[t]=a,n(t,a,r),0===a.length&&delete e[t]}}),e}},{key:"map",value:function(e,t){return Object.getOwnPropertyNames(e).map(function(r){return t(r,e[r])})}},{key:"transformState",value:function(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce(function(t,r){var n=e[r];return"metas"in n?t[r]=n.metas.map(function(e){return e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e}):t[r]=n,t},{})}},{key:"cloneDeep",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}();!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(h||(h={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(f||(f={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(p||(p={}));var Q=function(){var e,t,r,n;function a(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;(0,d.A)(this,a),this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=s.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Y(this,i.join,this.params,this.timeout),this.rejoinTimer=new M(function(){return t._rejoinUntilConnected()},this.socket.reconnectAfterMs),this.joinPush.receive("ok",function(){t.state=s.joined,t.rejoinTimer.reset(),t.pushBuffer.forEach(function(e){return e.send()}),t.pushBuffer=[]}),this._onClose(function(){t.rejoinTimer.reset(),t.socket.log("channel","close ".concat(t.topic," ").concat(t._joinRef())),t.state=s.closed,t.socket._remove(t)}),this._onError(function(e){t._isLeaving()||t._isClosed()||(t.socket.log("channel","error ".concat(t.topic),e),t.state=s.errored,t.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",function(){t._isJoining()&&(t.socket.log("channel","timeout ".concat(t.topic),t.joinPush.timeout),t.state=s.errored,t.rejoinTimer.scheduleTimeout())}),this._on(i.reply,{},function(e,r){t._trigger(t._replyEventName(r),e)}),this.presence=new Z(this),this.broadcastEndpointURL=$(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}return(0,v.A)(a,[{key:"subscribe",value:function(e){var t,r,n,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";var i=this.params.config,o=i.broadcast,u=i.presence,c=i.private;this._onError(function(t){return null==e?void 0:e(p.CHANNEL_ERROR,t)}),this._onClose(function(){return null==e?void 0:e(p.CLOSED)});var l={},h={broadcast:o,presence:u,postgres_changes:null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(function(e){return e.filter}))&&void 0!==n?n:[],private:c};return this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",(t=(0,U.A)(y().mark(function t(r){var n,s,i,o,u,c,l,h,f,d,v,b,g;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.postgres_changes,a.socket.setAuth(),void 0!==n){t.next=7;break}return null==e||e(p.SUBSCRIBED),t.abrupt("return");case 7:o=null!==(s=null==(i=a.bindings.postgres_changes)?void 0:i.length)&&void 0!==s?s:0,u=[],c=0;case 11:if(!(c<o)){t.next=25;break}if(f=(h=(l=i[c]).filter).event,d=h.schema,v=h.table,b=h.filter,!((g=n&&n[c])&&g.event===f&&g.schema===d&&g.table===v&&g.filter===b)){t.next=19;break}u.push(Object.assign(Object.assign({},l),{id:g.id})),t.next=22;break;case 19:return a.unsubscribe(),null==e||e(p.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes")),t.abrupt("return");case 22:c++,t.next=11;break;case 25:return a.bindings.postgres_changes=u,e&&e(p.SUBSCRIBED),t.abrupt("return");case 28:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)})).receive("error",function(t){null==e||e(p.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",function(){null==e||e(p.TIMED_OUT)}),this}},{key:"presenceState",value:function(){return this.presence.state}},{key:"track",value:(e=(0,U.A)(y().mark(function e(t){var r,n=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"untrack",value:(t=(0,U.A)(y().mark(function e(){var t,r=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.send({type:"presence",event:"untrack"},t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"on",value:function(e,t,r){return this._on(e,t,r)}},{key:"send",value:(r=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u,c=this,l=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:{},!(!this._canPush()&&"broadcast"===t.type)){e.next=23;break}return s=t.event,i=t.payload,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})},e.prev=5,e.next=8,this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=r.timeout)&&void 0!==n?n:this.timeout);case 8:return u=e.sent,e.next=11,null===(a=u.body)||void 0===a?void 0:a.cancel();case 11:return e.abrupt("return",u.ok?"ok":"error");case 14:if(e.prev=14,e.t0=e.catch(5),"AbortError"!==e.t0.name){e.next=20;break}return e.abrupt("return","timed out");case 20:return e.abrupt("return","error");case 21:e.next=24;break;case 23:return e.abrupt("return",new Promise(function(e){var n,a,s,i=c._push(t.type,t,r.timeout||c.timeout);"broadcast"!==t.type||(null===(s=null===(a=null===(n=c.params)||void 0===n?void 0:n.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||e("ok"),i.receive("ok",function(){return e("ok")}),i.receive("error",function(){return e("error")}),i.receive("timeout",function(){return e("timed out")})}));case 24:case"end":return e.stop()}},e,this,[[5,14]])})),function(e){return r.apply(this,arguments)})},{key:"updateJoinPayload",value:function(e){this.joinPush.updatePayload(e)}},{key:"unsubscribe",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=s.leaving;var r=function(){e.socket.log("channel","leave ".concat(e.topic)),e._trigger(i.close,"leave",e._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(function(n){var a=new Y(e,i.leave,{},t);a.receive("ok",function(){r(),n("ok")}).receive("timeout",function(){r(),n("timed out")}).receive("error",function(){n("error")}),a.send(),e._canPush()||a.trigger("ok",{})})}},{key:"_fetchWithTimeout",value:(n=(0,U.A)(y().mark(function e(t,r,n){var a,s,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new AbortController,s=setTimeout(function(){return a.abort()},n),e.next=4,this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));case 4:return i=e.sent,clearTimeout(s),e.abrupt("return",i);case 7:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"_push",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");var n=new Y(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}},{key:"_onMessage",value:function(e,t,r){return t}},{key:"_isMember",value:function(e){return this.topic===e}},{key:"_joinRef",value:function(){return this.joinPush.ref}},{key:"_trigger",value:function(e,t,r){var n,a,s=this,o=e.toLocaleLowerCase(),u=i.close,c=i.error,l=i.leave,h=i.join;if(!(r&&[u,c,l,h].indexOf(o)>=0)||r===this._joinRef()){var f=this._onMessage(o,t,r);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(function(e){var t,r,n;return(null===(t=e.filter)||void 0===t?void 0:t.event)==="*"||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===o}).map(function(e){return e.callback(f,r)}):null===(a=this.bindings[o])||void 0===a||a.filter(function(e){if(!["broadcast","presence","postgres_changes"].includes(o))return e.type.toLocaleLowerCase()===o;if("id"in e){var r,n,a,s,i,u,c=e.id,l=null===(r=e.filter)||void 0===r?void 0:r.event;return c&&(null===(n=t.ids)||void 0===n?void 0:n.includes(c))&&("*"===l||(null==l?void 0:l.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}var h=null===(i=null===(s=null==e?void 0:e.filter)||void 0===s?void 0:s.event)||void 0===i?void 0:i.toLocaleLowerCase();return"*"===h||h===(null===(u=null==t?void 0:t.event)||void 0===u?void 0:u.toLocaleLowerCase())}).map(function(e){if("object"==typeof f&&"ids"in f){var t=f.data;f=Object.assign(Object.assign({},{schema:t.schema,table:t.table,commit_timestamp:t.commit_timestamp,eventType:t.type,new:{},old:{},errors:t.errors}),s._getPayloadRecords(t))}e.callback(f,r)})}}},{key:"_isClosed",value:function(){return this.state===s.closed}},{key:"_isJoined",value:function(){return this.state===s.joined}},{key:"_isJoining",value:function(){return this.state===s.joining}},{key:"_isLeaving",value:function(){return this.state===s.leaving}},{key:"_replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"_on",value:function(e,t,r){var n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}},{key:"_off",value:function(e,t){var r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(function(e){var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&a.isEqual(e.filter,t))}),this}},{key:"_rejoinUntilConnected",value:function(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}},{key:"_onClose",value:function(e){this._on(i.close,{},e)}},{key:"_onError",value:function(e){this._on(i.error,{},function(t){return e(t)})}},{key:"_canPush",value:function(){return this.socket.isConnected()&&this._isJoined()}},{key:"_rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=s.joining,this.joinPush.resend(e))}},{key:"_getPayloadRecords",value:function(e){var t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=z(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=z(e.columns,e.old_record)),t}}],[{key:"isEqual",value:function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}}]),a}(),ee=function(){},et="undefined"!=typeof WebSocket,er=function(){var e,t,n,s,c;function l(e,t){var n,a=this;(0,d.A)(this,l),this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=D,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ee,this.conn=null,this.sendBuffer=[],this.serializer=new B,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=function(e){var t;return e?t=e:"undefined"==typeof fetch?t=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,5070)).then(function(e){return e.default.apply(void 0,t)})}:t=fetch,function(){return t.apply(void 0,arguments)}},this.endPoint="".concat(e,"/").concat(o.websocket),this.httpEndpoint=$(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);var s=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:function(e){return[1e3,2e3,5e3,1e4][e-1]||1e4},this.encode=(null==t?void 0:t.encode)?t.encode:function(e,t){return t(JSON.stringify(e))},this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new M((0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.disconnect(),a.connect();case 2:case"end":return e.stop()}},e)})),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}return(0,v.A)(l,[{key:"connect",value:function(){var e=this;if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(et){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new en(this.endpointURL(),void 0,{close:function(){e.conn=null}}),r.e(710).then(r.t.bind(r,710,23)).then(function(t){var r=t.default;e.conn=new r(e.endpointURL(),void 0,{headers:e.headers}),e.setupConnection()})}}},{key:"endpointURL",value:function(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}},{key:"disconnect",value:function(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}},{key:"getChannels",value:function(){return this.channels}},{key:"removeChannel",value:(e=(0,U.A)(y().mark(function e(t){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.unsubscribe();case 2:return r=e.sent,0===this.channels.length&&this.disconnect(),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"removeAllChannels",value:(t=(0,U.A)(y().mark(function e(){var t;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.channels.map(function(e){return e.unsubscribe()}));case 2:return t=e.sent,this.disconnect(),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"log",value:function(e,t,r){this.logger(e,t,r)}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case a.connecting:return u.Connecting;case a.open:return u.Open;case a.closing:return u.Closing;default:return u.Closed}}},{key:"isConnected",value:function(){return this.connectionState()===u.Open}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=new Q("realtime:".concat(e),t,this);return this.channels.push(r),r}},{key:"push",value:function(e){var t=this,r=e.topic,n=e.event,a=e.payload,s=e.ref,i=function(){t.encode(e,function(e){var r;null===(r=t.conn)||void 0===r||r.send(e)})};this.log("push","".concat(r," ").concat(n," (").concat(s,")"),a),this.isConnected()?i():this.sendBuffer.push(i)}},{key:"setAuth",value:(n=(0,U.A)(y().mark(function e(){var t,r,n,a=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:null,e.t1=t,e.t1){e.next=9;break}if(e.t2=this.accessToken,!e.t2){e.next=8;break}return e.next=7,this.accessToken();case 7:e.t2=e.sent;case 8:e.t1=e.t2;case 9:if(e.t0=e.t1,e.t0){e.next=12;break}e.t0=this.accessTokenValue;case 12:if(!(r=e.t0)){e.next=24;break}n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch(e){}if(!(n&&n.exp)||Math.floor(Date.now()/1e3)-n.exp<0){e.next=22;break}return this.log("auth",'InvalidJWTToken: Invalid value for JWT claim "exp" with value '.concat(n.exp)),e.abrupt("return",Promise.reject('InvalidJWTToken: Invalid value for JWT claim "exp" with value '.concat(n.exp)));case 22:this.accessTokenValue=r,this.channels.forEach(function(e){r&&e.updateJoinPayload({access_token:r}),e.joinedOnce&&e._isJoined()&&e._push(i.access_token,{access_token:r})});case 24:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"sendHeartbeat",value:(s=(0,U.A)(y().mark(function e(){var t;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}return e.abrupt("return");case 2:if(!this.pendingHeartbeatRef){e.next=7;break}return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),null===(t=this.conn)||void 0===t||t.close(1e3,"hearbeat timeout"),e.abrupt("return");case 7:this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth();case 10:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:"_makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"_leaveOpenTopic",value:function(e){var t=this.channels.find(function(t){return t.topic===e&&(t._isJoined()||t._isJoining())});t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}},{key:"_remove",value:function(e){this.channels=this.channels.filter(function(t){return t._joinRef()!==e._joinRef()})}},{key:"setupConnection",value:function(){var e=this;this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=function(){return e._onConnOpen()},this.conn.onerror=function(t){return e._onConnError(t)},this.conn.onmessage=function(t){return e._onConnMessage(t)},this.conn.onclose=function(t){return e._onConnClose(t)})}},{key:"_onConnMessage",value:function(e){var t=this;this.decode(e.data,function(e){var r=e.topic,n=e.event,a=e.payload,s=e.ref;s&&s===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.log("receive","".concat(a.status||""," ").concat(r," ").concat(n," ").concat(s&&"("+s+")"||""),a),t.channels.filter(function(e){return e._isMember(r)}).forEach(function(e){return e._trigger(n,a,s)}),t.stateChangeCallbacks.message.forEach(function(t){return t(e)})})}},{key:"_onConnOpen",value:(c=(0,U.A)(y().mark(function e(){var t,r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?(this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker"),t=this._workerObjectUrl(this.workerUrl),this.workerRef=new Worker(t),this.workerRef.onerror=function(e){r.log("worker","worker error",e.message),r.workerRef.terminate()},this.workerRef.onmessage=function(e){"keepAlive"===e.data.event&&r.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})):(this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return r.sendHeartbeat()},this.heartbeatIntervalMs)),this.stateChangeCallbacks.open.forEach(function(e){return e()});case 5:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"_onConnClose",value:function(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(t){return t(e)})}},{key:"_onConnError",value:function(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(function(t){return t(e)})}},{key:"_triggerChanError",value:function(){this.channels.forEach(function(e){return e._trigger(i.error)})}},{key:"_appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return"".concat(e).concat(r).concat(n)}},{key:"_workerObjectUrl",value:function(e){var t;if(e)t=e;else{var r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}]),l}(),en=(0,v.A)(function e(t,r,n){(0,d.A)(this,e),this.binaryType="arraybuffer",this.onclose=function(){},this.onerror=function(){},this.onmessage=function(){},this.onopen=function(){},this.readyState=a.connecting,this.send=function(){},this.url=null,this.url=t,this.close=n.close});function ea(e){var t=es();return function(){var r,n=(0,w.A)(e);return r=t?Reflect.construct(n,arguments,(0,w.A)(this).constructor):n.apply(this,arguments),(0,k.A)(this,r)}}function es(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(es=function(){return!!e})()}var ei=function(e){(0,m.A)(r,e);var t=ea(r);function r(e){var n;return(0,d.A)(this,r),(n=t.call(this,e)).__isStorageError=!0,n.name="StorageError",n}return(0,v.A)(r)}((0,x.A)(Error));function eo(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}var eu=function(e){(0,m.A)(r,e);var t=ea(r);function r(e,n){var a;return(0,d.A)(this,r),(a=t.call(this,e)).name="StorageApiError",a.status=n,a}return(0,v.A)(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status}}}]),r}(ei),ec=function(e){(0,m.A)(r,e);var t=ea(r);function r(e,n){var a;return(0,d.A)(this,r),(a=t.call(this,e)).name="StorageUnknownError",a.originalError=n,a}return(0,v.A)(r)}(ei),el=r(615),eh=function(e){var t;return e?t=e:"undefined"==typeof fetch?t=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,5070)).then(function(e){return e.default.apply(void 0,t)})}:t=fetch,function(){return t.apply(void 0,arguments)}},ef=function(){var e,t,n,a;return e=void 0,t=void 0,n=void 0,a=y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof Response){e.next=4;break}return e.next=3,Promise.resolve().then(r.bind(r,5070));case 3:return e.abrupt("return",e.sent.Response);case 4:return e.abrupt("return",Response);case 5:case"end":return e.stop()}},e)}),new(n||(n=Promise))(function(r,s){function i(e){try{u(a.next(e))}catch(e){s(e)}}function o(e){try{u(a.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(i,o)}u((a=a.apply(e,t||[])).next())})},ep=function e(t){if(Array.isArray(t))return t.map(function(t){return e(t)});if("function"==typeof t||t!==Object(t))return t;var r={};return Object.entries(t).forEach(function(t){var n=(0,el.A)(t,2),a=n[0],s=n[1];r[a.replace(/([-_][a-z])/gi,function(e){return e.toUpperCase().replace(/[-_]/g,"")})]=e(s)}),r},ed=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,o)}u((n=n.apply(e,t||[])).next())})},ev=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},eb=function(e,t,r){return ed(void 0,void 0,void 0,y().mark(function n(){return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ef();case 2:e instanceof n.sent&&!(null==r?void 0:r.noResolveJson)?e.json().then(function(r){t(new eu(ev(r),e.status||500))}).catch(function(e){t(new ec(ev(e),e))}):t(new ec(ev(e),e));case 4:case"end":return n.stop()}},n)}))},ey=function(e,t,r,n){var a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function eg(e,t,r,n,a,s){return ed(this,void 0,void 0,y().mark(function i(){return y().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new Promise(function(i,o){e(r,ey(t,n,a,s)).then(function(e){if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()}).then(function(e){return i(e)}).catch(function(e){return eb(e,o,n)})}));case 1:case"end":return i.stop()}},i)}))}function em(e,t,r,n){return ed(this,void 0,void 0,y().mark(function a(){return y().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",eg(e,"GET",t,r,n));case 1:case"end":return a.stop()}},a)}))}function ek(e,t,r,n,a){return ed(this,void 0,void 0,y().mark(function s(){return y().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",eg(e,"POST",t,n,a,r));case 1:case"end":return s.stop()}},s)}))}function ew(e,t,r,n,a){return ed(this,void 0,void 0,y().mark(function s(){return y().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",eg(e,"DELETE",t,n,a,r));case 1:case"end":return s.stop()}},s)}))}var ex=r(1987).Buffer,e_=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,o)}u((n=n.apply(e,t||[])).next())})},eA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},eE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},eS=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;(0,d.A)(this,e),this.url=t,this.headers=r,this.bucketId=n,this.fetch=eh(a)}return(0,v.A)(e,[{key:"uploadOrUpdate",value:function(e,t,r,n){return e_(this,void 0,void 0,y().mark(function a(){var s,i,o,u,c,l,h,f,p;return y().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i=Object.assign(Object.assign({},eE),n),o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)}),u=i.metadata,"undefined"!=typeof Blob&&r instanceof Blob?((s=new FormData).append("cacheControl",i.cacheControl),u&&s.append("metadata",this.encodeMetadata(u)),s.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?((s=r).append("cacheControl",i.cacheControl),u&&s.append("metadata",this.encodeMetadata(u))):(s=r,o["cache-control"]="max-age=".concat(i.cacheControl),o["content-type"]=i.contentType,u&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),(null==n?void 0:n.headers)&&(o=Object.assign(Object.assign({},o),n.headers)),c=this._removeEmptyFolders(t),l=this._getFinalPath(c),a.next=10,this.fetch("".concat(this.url,"/object/").concat(l),Object.assign({method:e,body:s,headers:o},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{}));case 10:return h=a.sent,a.next=13,h.json();case 13:if(f=a.sent,!h.ok){a.next=18;break}return a.abrupt("return",{data:{path:c,id:f.Id,fullPath:f.Key},error:null});case 18:return p=f,a.abrupt("return",{data:null,error:p});case 20:a.next=27;break;case 22:if(a.prev=22,a.t0=a.catch(0),!eo(a.t0)){a.next=26;break}return a.abrupt("return",{data:null,error:a.t0});case 26:throw a.t0;case 27:case"end":return a.stop()}},a,this,[[0,22]])}))}},{key:"upload",value:function(e,t,r){return e_(this,void 0,void 0,y().mark(function n(){return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.uploadOrUpdate("POST",e,t,r));case 1:case"end":return n.stop()}},n,this)}))}},{key:"uploadToSignedUrl",value:function(e,t,r,n){return e_(this,void 0,void 0,y().mark(function a(){var s,i,o,u,c,l,h,f,p;return y().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=this._removeEmptyFolders(e),i=this._getFinalPath(s),(o=new URL(this.url+"/object/upload/sign/".concat(i))).searchParams.set("token",t),a.prev=4,c=Object.assign({upsert:eE.upsert},n),l=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)}),"undefined"!=typeof Blob&&r instanceof Blob?((u=new FormData).append("cacheControl",c.cacheControl),u.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(u=r).append("cacheControl",c.cacheControl):(u=r,l["cache-control"]="max-age=".concat(c.cacheControl),l["content-type"]=c.contentType),a.next=10,this.fetch(o.toString(),{method:"PUT",body:u,headers:l});case 10:return h=a.sent,a.next=13,h.json();case 13:if(f=a.sent,!h.ok){a.next=18;break}return a.abrupt("return",{data:{path:s,fullPath:f.Key},error:null});case 18:return p=f,a.abrupt("return",{data:null,error:p});case 20:a.next=27;break;case 22:if(a.prev=22,a.t0=a.catch(4),!eo(a.t0)){a.next=26;break}return a.abrupt("return",{data:null,error:a.t0});case 26:throw a.t0;case 27:case"end":return a.stop()}},a,this,[[4,22]])}))}},{key:"createSignedUploadUrl",value:function(e,t){return e_(this,void 0,void 0,y().mark(function r(){var n,a,s,i,o;return y().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=this._getFinalPath(e),a=Object.assign({},this.headers),(null==t?void 0:t.upsert)&&(a["x-upsert"]="true"),r.next=6,ek(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:a});case 6:if(s=r.sent,o=(i=new URL(this.url+s.url)).searchParams.get("token")){r.next=11;break}throw new ei("No token returned by API");case 11:return r.abrupt("return",{data:{signedUrl:i.toString(),path:e,token:o},error:null});case 14:if(r.prev=14,r.t0=r.catch(0),!eo(r.t0)){r.next=18;break}return r.abrupt("return",{data:null,error:r.t0});case 18:throw r.t0;case 19:case"end":return r.stop()}},r,this,[[0,14]])}))}},{key:"update",value:function(e,t,r){return e_(this,void 0,void 0,y().mark(function n(){return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.uploadOrUpdate("PUT",e,t,r));case 1:case"end":return n.stop()}},n,this)}))}},{key:"move",value:function(e,t,r){return e_(this,void 0,void 0,y().mark(function n(){var a;return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ek(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers});case 3:return a=n.sent,n.abrupt("return",{data:a,error:null});case 7:if(n.prev=7,n.t0=n.catch(0),!eo(n.t0)){n.next=11;break}return n.abrupt("return",{data:null,error:n.t0});case 11:throw n.t0;case 12:case"end":return n.stop()}},n,this,[[0,7]])}))}},{key:"copy",value:function(e,t,r){return e_(this,void 0,void 0,y().mark(function n(){var a;return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ek(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers});case 3:return a=n.sent,n.abrupt("return",{data:{path:a.Key},error:null});case 7:if(n.prev=7,n.t0=n.catch(0),!eo(n.t0)){n.next=11;break}return n.abrupt("return",{data:null,error:n.t0});case 11:throw n.t0;case 12:case"end":return n.stop()}},n,this,[[0,7]])}))}},{key:"createSignedUrl",value:function(e,t,r){return e_(this,void 0,void 0,y().mark(function n(){var a,s,i;return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=this._getFinalPath(e),n.next=4,ek(this.fetch,"".concat(this.url,"/object/sign/").concat(a),Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});case 4:return s=n.sent,i=(null==r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"",s={signedUrl:encodeURI("".concat(this.url).concat(s.signedURL).concat(i))},n.abrupt("return",{data:s,error:null});case 11:if(n.prev=11,n.t0=n.catch(0),!eo(n.t0)){n.next=15;break}return n.abrupt("return",{data:null,error:n.t0});case 15:throw n.t0;case 16:case"end":return n.stop()}},n,this,[[0,11]])}))}},{key:"createSignedUrls",value:function(e,t,r){return e_(this,void 0,void 0,y().mark(function n(){var a,s,i=this;return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ek(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers});case 3:return a=n.sent,s=(null==r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"",n.abrupt("return",{data:a.map(function(e){return Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(i.url).concat(e.signedURL).concat(s)):null})}),error:null});case 8:if(n.prev=8,n.t0=n.catch(0),!eo(n.t0)){n.next=12;break}return n.abrupt("return",{data:null,error:n.t0});case 12:throw n.t0;case 13:case"end":return n.stop()}},n,this,[[0,8]])}))}},{key:"download",value:function(e,t){return e_(this,void 0,void 0,y().mark(function r(){var n,a,s,i,o,u;return y().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=(a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}))?"?".concat(a):"",r.prev=4,i=this._getFinalPath(e),r.next=8,em(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(i).concat(s),{headers:this.headers,noResolveJson:!0});case 8:return o=r.sent,r.next=11,o.blob();case 11:return u=r.sent,r.abrupt("return",{data:u,error:null});case 15:if(r.prev=15,r.t0=r.catch(4),!eo(r.t0)){r.next=19;break}return r.abrupt("return",{data:null,error:r.t0});case 19:throw r.t0;case 20:case"end":return r.stop()}},r,this,[[4,15]])}))}},{key:"info",value:function(e){return e_(this,void 0,void 0,y().mark(function t(){var r,n;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this._getFinalPath(e),t.prev=1,t.next=4,em(this.fetch,"".concat(this.url,"/object/info/").concat(r),{headers:this.headers});case 4:return n=t.sent,t.abrupt("return",{data:ep(n),error:null});case 8:if(t.prev=8,t.t0=t.catch(1),!eo(t.t0)){t.next=12;break}return t.abrupt("return",{data:null,error:t.t0});case 12:throw t.t0;case 13:case"end":return t.stop()}},t,this,[[1,8]])}))}},{key:"exists",value:function(e){return e_(this,void 0,void 0,y().mark(function t(){var r,n;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this._getFinalPath(e),t.prev=1,t.next=4,function(e,t,r,n){return ed(this,void 0,void 0,y().mark(function n(){return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",eg(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),void 0));case 1:case"end":return n.stop()}},n)}))}(this.fetch,"".concat(this.url,"/object/").concat(r),{headers:this.headers});case 4:return t.abrupt("return",{data:!0,error:null});case 7:if(t.prev=7,t.t0=t.catch(1),!(eo(t.t0)&&t.t0 instanceof ec)||![400,404].includes(null==(n=t.t0.originalError)?void 0:n.status)){t.next=13;break}return t.abrupt("return",{data:!1,error:t.t0});case 13:throw t.t0;case 14:case"end":return t.stop()}},t,this,[[1,7]])}))}},{key:"getPublicUrl",value:function(e,t){var r=this._getFinalPath(e),n=[],a=(null==t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==a&&n.push(a);var s=void 0!==(null==t?void 0:t.transform),i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&n.push(i);var o=n.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(s?"render/image":"object","/public/").concat(r).concat(o))}}}},{key:"remove",value:function(e){return e_(this,void 0,void 0,y().mark(function t(){var r;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ew(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!eo(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}},t,this,[[0,7]])}))}},{key:"list",value:function(e,t,r){return e_(this,void 0,void 0,y().mark(function n(){var a,s;return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=Object.assign(Object.assign(Object.assign({},eA),t),{prefix:e||""}),n.next=4,ek(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),a,{headers:this.headers},r);case 4:return s=n.sent,n.abrupt("return",{data:s,error:null});case 8:if(n.prev=8,n.t0=n.catch(0),!eo(n.t0)){n.next=12;break}return n.abrupt("return",{data:null,error:n.t0});case 12:throw n.t0;case 13:case"end":return n.stop()}},n,this,[[0,8]])}))}},{key:"encodeMetadata",value:function(e){return JSON.stringify(e)}},{key:"toBase64",value:function(e){return void 0!==ex?ex.from(e).toString("base64"):btoa(e)}},{key:"_getFinalPath",value:function(e){return"".concat(this.bucketId,"/").concat(e)}},{key:"_removeEmptyFolders",value:function(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}},{key:"transformOptsToQueryString",value:function(e){var t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}]),e}(),eO={"X-Client-Info":"storage-js/".concat("2.7.1")},eT=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,o)}u((n=n.apply(e,t||[])).next())})};function ej(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ej=function(){return!!e})()}var eP=function(e){(0,m.A)(n,e);var t,r=(t=ej(),function(){var e,r=(0,w.A)(n);return e=t?Reflect.construct(r,arguments,(0,w.A)(this).constructor):r.apply(this,arguments),(0,k.A)(this,e)});function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return(0,d.A)(this,n),r.call(this,e,t,a)}return(0,v.A)(n,[{key:"from",value:function(e){return new eS(this.url,this.headers,e,this.fetch)}}]),n}(function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;(0,d.A)(this,e),this.url=t,this.headers=Object.assign(Object.assign({},eO),r),this.fetch=eh(n)}return(0,v.A)(e,[{key:"listBuckets",value:function(){return eT(this,void 0,void 0,y().mark(function e(){var t;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,em(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers});case 3:return t=e.sent,e.abrupt("return",{data:t,error:null});case 7:if(e.prev=7,e.t0=e.catch(0),!eo(e.t0)){e.next=11;break}return e.abrupt("return",{data:null,error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[0,7]])}))}},{key:"getBucket",value:function(e){return eT(this,void 0,void 0,y().mark(function t(){var r;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,em(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!eo(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}},t,this,[[0,7]])}))}},{key:"createBucket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return eT(this,void 0,void 0,y().mark(function r(){var n;return y().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ek(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});case 3:return n=r.sent,r.abrupt("return",{data:n,error:null});case 7:if(r.prev=7,r.t0=r.catch(0),!eo(r.t0)){r.next=11;break}return r.abrupt("return",{data:null,error:r.t0});case 11:throw r.t0;case 12:case"end":return r.stop()}},r,this,[[0,7]])}))}},{key:"updateBucket",value:function(e,t){return eT(this,void 0,void 0,y().mark(function r(){var n;return y().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,function(e,t,r,n,a){return ed(this,void 0,void 0,y().mark(function a(){return y().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",eg(e,"PUT",t,n,void 0,r));case 1:case"end":return a.stop()}},a)}))}(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});case 3:return n=r.sent,r.abrupt("return",{data:n,error:null});case 7:if(r.prev=7,r.t0=r.catch(0),!eo(r.t0)){r.next=11;break}return r.abrupt("return",{data:null,error:r.t0});case 11:throw r.t0;case 12:case"end":return r.stop()}},r,this,[[0,7]])}))}},{key:"emptyBucket",value:function(e){return eT(this,void 0,void 0,y().mark(function t(){var r;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ek(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!eo(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}},t,this,[[0,7]])}))}},{key:"deleteBucket",value:function(e){return eT(this,void 0,void 0,y().mark(function t(){var r;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ew(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!eo(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}},t,this,[[0,7]])}))}}]),e}()),eC="";"undefined"!=typeof Deno?eC="deno":"undefined"!=typeof document?eC="web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?eC="react-native":eC="node";var eR={headers:{"X-Client-Info":"supabase-js-".concat(eC,"/").concat("2.48.1")}},eI={schema:"public"},eN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},eL={},eU=r(5070),eD=function(e){var t;return e?t=e:"undefined"==typeof fetch?t=eU.default:t=fetch,function(){return t.apply(void 0,arguments)}},eB=function(e,t,r){var n=eD(r),a="undefined"==typeof Headers?eU.Headers:Headers;return function(r,s){var i,o,u,c;return i=void 0,o=void 0,u=void 0,c=y().mark(function i(){var o,u,c;return y().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t();case 2:if(i.t1=o=i.sent,i.t0=null!==i.t1,!i.t0){i.next=6;break}i.t0=void 0!==o;case 6:if(!i.t0){i.next=10;break}i.t2=o,i.next=11;break;case 10:i.t2=e;case 11:return u=i.t2,(c=new a(null==s?void 0:s.headers)).has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization","Bearer ".concat(u)),i.abrupt("return",n(r,Object.assign(Object.assign({},s),{headers:c})));case 16:case"end":return i.stop()}},i)}),new(u||(u=Promise))(function(e,t){function r(e){try{a(c.next(e))}catch(e){t(e)}}function n(e){try{a(c.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):((a=t.value)instanceof u?a:new u(function(e){e(a)})).then(r,n)}a((c=c.apply(i,o||[])).next())})}},eM="2.67.3",ez="X-Supabase-Api-Version",eF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},eq=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},eJ={tested:!1,writable:!1},eH=function(){if(!eq())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(eJ.tested)return eJ.writable;var e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),eJ.tested=!0,eJ.writable=!0}catch(e){eJ.tested=!0,eJ.writable=!1}return eJ.writable},eK=function(e){var t;return e?t=e:"undefined"==typeof fetch?t=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,5070)).then(function(e){return e.default.apply(void 0,t)})}:t=fetch,function(){return t.apply(void 0,arguments)}},eW=function(){var e=(0,U.A)(y().mark(function e(t,r,n){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setItem(r,JSON.stringify(n));case 2:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}(),eG=function(){var e=(0,U.A)(y().mark(function e(t,r){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getItem(r);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.prev=5,e.abrupt("return",JSON.parse(n));case 9:return e.prev=9,e.t0=e.catch(5),e.abrupt("return",n);case 12:case"end":return e.stop()}},e,null,[[5,9]])}));return function(t,r){return e.apply(this,arguments)}}(),eV=function(){var e=(0,U.A)(y().mark(function e(t,r){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.removeItem(r);case 2:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),e$=(0,v.A)(function e(){var t=this;(0,d.A)(this,e),this.promise=new e.promiseConstructor(function(e,r){t.resolve=e,t.reject=r})});function eY(e){var t=e.split(".");if(3!==t.length)throw Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw Error("JWT is not valid: payload is not in base64url format");return JSON.parse(function(e){var t,r,n,a,s,i,o,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0;for(e=e.replace("-","+").replace("_","/");l<e.length;)a=u.indexOf(e.charAt(l++)),s=u.indexOf(e.charAt(l++)),i=u.indexOf(e.charAt(l++)),o=u.indexOf(e.charAt(l++)),t=a<<2|s>>4,r=(15&s)<<4|i>>2,n=(3&i)<<6|o,c+=String.fromCharCode(t),64!=i&&0!=r&&(c+=String.fromCharCode(r)),64!=o&&0!=n&&(c+=String.fromCharCode(n));return c}(t[1]))}function eX(){return(eX=(0,U.A)(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){setTimeout(function(){return e(null)},t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function eZ(e){return("0"+e.toString(16)).substr(-2)}function eQ(){return(eQ=(0,U.A)(y().mark(function e(t){var r,n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new TextEncoder().encode(t),e.next=4,crypto.subtle.digest("SHA-256",r);case 4:return n=new Uint8Array(e.sent),e.abrupt("return",Array.from(n).map(function(e){return String.fromCharCode(e)}).join(""));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function e0(){return(e0=(0,U.A)(y().mark(function e(t){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder){e.next=4;break}return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e.abrupt("return",t);case 4:return e.next=6,function(e){return eQ.apply(this,arguments)}(t);case 6:return r=e.sent,e.abrupt("return",btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function e1(e,t){return e2.apply(this,arguments)}function e2(){return(e2=(0,U.A)(y().mark(function e(t,r){var n,a,s,i,o,u=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]&&u[2],s=a=function(){var e=new Uint32Array(56);if("undefined"==typeof crypto){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,n="",a=0;a<56;a++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,eZ).join("")}(),n&&(s+="/PASSWORD_RECOVERY"),e.next=6,eW(t,"".concat(r,"-code-verifier"),s);case 6:return e.next=8,function(e){return e0.apply(this,arguments)}(a);case 8:return i=e.sent,o=a===i?"plain":"s256",e.abrupt("return",[i,o]);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}e$.promiseConstructor=Promise;var e3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function e4(e){var t=e6();return function(){var r,n=(0,w.A)(e);return r=t?Reflect.construct(n,arguments,(0,w.A)(this).constructor):n.apply(this,arguments),(0,k.A)(this,r)}}function e6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(e6=function(){return!!e})()}var e5=function(e){(0,m.A)(r,e);var t=e4(r);function r(e,n,a){var s;return(0,d.A)(this,r),(s=t.call(this,e)).__isAuthError=!0,s.name="AuthError",s.status=n,s.code=a,s}return(0,v.A)(r)}((0,x.A)(Error));function e8(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}var e7=function(e){(0,m.A)(r,e);var t=e4(r);function r(e,n,a){var s;return(0,d.A)(this,r),(s=t.call(this,e,n,a)).name="AuthApiError",s.status=n,s.code=a,s}return(0,v.A)(r)}(e5),e9=function(e){(0,m.A)(r,e);var t=e4(r);function r(e,n){var a;return(0,d.A)(this,r),(a=t.call(this,e)).name="AuthUnknownError",a.originalError=n,a}return(0,v.A)(r)}(e5),te=function(e){(0,m.A)(r,e);var t=e4(r);function r(e,n,a,s){var i;return(0,d.A)(this,r),(i=t.call(this,e,a,s)).name=n,i.status=a,i}return(0,v.A)(r)}(e5),tt=function(e){(0,m.A)(r,e);var t=e4(r);function r(){return(0,d.A)(this,r),t.call(this,"Auth session missing!","AuthSessionMissingError",400,void 0)}return(0,v.A)(r)}(te),tr=function(e){(0,m.A)(r,e);var t=e4(r);function r(){return(0,d.A)(this,r),t.call(this,"Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}return(0,v.A)(r)}(te),tn=function(e){(0,m.A)(r,e);var t=e4(r);function r(e){return(0,d.A)(this,r),t.call(this,e,"AuthInvalidCredentialsError",400,void 0)}return(0,v.A)(r)}(te),ta=function(e){(0,m.A)(r,e);var t=e4(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,d.A)(this,r),(n=t.call(this,e,"AuthImplicitGrantRedirectError",500,void 0)).details=null,n.details=a,n}return(0,v.A)(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}]),r}(te),ts=function(e){(0,m.A)(r,e);var t=e4(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,d.A)(this,r),(n=t.call(this,e,"AuthPKCEGrantCodeExchangeError",500,void 0)).details=null,n.details=a,n}return(0,v.A)(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}]),r}(te),ti=function(e){(0,m.A)(r,e);var t=e4(r);function r(e,n){return(0,d.A)(this,r),t.call(this,e,"AuthRetryableFetchError",n,void 0)}return(0,v.A)(r)}(te);function to(e){return e8(e)&&"AuthRetryableFetchError"===e.name}var tu=function(e){(0,m.A)(r,e);var t=e4(r);function r(e,n,a){var s;return(0,d.A)(this,r),(s=t.call(this,e,"AuthWeakPasswordError",n,"weak_password")).reasons=a,s}return(0,v.A)(r)}(te),tc=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r},tl=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},th=[502,503,504];function tf(e){return tp.apply(this,arguments)}function tp(){return(tp=(0,U.A)(y().mark(function e(t){var r,n,a,s;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("object"==typeof t&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"==typeof t.json){e.next=2;break}throw new ti(tl(t),0);case 2:if(!th.includes(t.status)){e.next=4;break}throw new ti(tl(t),t.status);case 4:return e.prev=4,e.next=7,t.json();case 7:n=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),new e9(tl(e.t0),e.t0);case 13:if(a=void 0,(s=function(e){var t=e.headers.get(ez);if(!t||!t.match(e3))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(e){return null}}(t))&&s.getTime()>=eF["2024-01-01"].timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?a=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(a=n.error_code),a){e.next=21;break}if(!("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce(function(e,t){return e&&"string"==typeof t},!0))){e.next=19;break}throw new tu(tl(n),t.status,n.weak_password.reasons);case 19:e.next=27;break;case 21:if("weak_password"!==a){e.next=25;break}throw new tu(tl(n),t.status,(null===(r=n.weak_password)||void 0===r?void 0:r.reasons)||[]);case 25:if("session_not_found"!==a){e.next=27;break}throw new tt;case 27:throw new e7(tl(n),t.status||500,a);case 28:case"end":return e.stop()}},e,null,[[4,10]])}))).apply(this,arguments)}var td=function(e,t,r,n){var a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};function tv(e,t,r,n){return tb.apply(this,arguments)}function tb(){return(tb=(0,U.A)(y().mark(function e(t,r,n,a){var s,i,o,u,c;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=Object.assign({},null==a?void 0:a.headers))[ez]||(i[ez]=eF["2024-01-01"].name),(null==a?void 0:a.jwt)&&(i.Authorization="Bearer ".concat(a.jwt)),o=null!==(s=null==a?void 0:a.query)&&void 0!==s?s:{},(null==a?void 0:a.redirectTo)&&(o.redirect_to=a.redirectTo),u=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",e.next=8,function(e,t,r,n,a,s){return ty.apply(this,arguments)}(t,r,n+u,{headers:i,noResolveJson:null==a?void 0:a.noResolveJson},{},null==a?void 0:a.body);case 8:return c=e.sent,e.abrupt("return",(null==a?void 0:a.xform)?null==a?void 0:a.xform(c):{data:Object.assign({},c),error:null});case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ty(){return(ty=(0,U.A)(y().mark(function e(t,r,n,a,s,i){var o,u;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=td(r,a,s,i),e.prev=1,e.next=4,t(n,Object.assign({},o));case 4:u=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),console.error(e.t0),new ti(tl(e.t0),0);case 11:if(u.ok){e.next=14;break}return e.next=14,tf(u);case 14:if(!(null==a?void 0:a.noResolveJson)){e.next=16;break}return e.abrupt("return",u);case 16:return e.prev=16,e.next=19,u.json();case 19:return e.abrupt("return",e.sent);case 22:return e.prev=22,e.t1=e.catch(16),e.next=26,tf(e.t1);case 26:case"end":return e.stop()}},e,null,[[1,7],[16,22]])}))).apply(this,arguments)}function tg(e){var t,r,n=null;return e.access_token&&e.refresh_token&&e.expires_in&&(n=Object.assign({},e),!e.expires_at)&&(n.expires_at=(t=e.expires_in,Math.round(Date.now()/1e3)+t)),{data:{session:n,user:null!==(r=e.user)&&void 0!==r?r:e},error:null}}function tm(e){var t=tg(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(function(e,t){return e&&"string"==typeof t},!0)&&(t.data.weak_password=e.weak_password),t}function tk(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function tw(e){return{data:e,error:null}}function tx(e){return{data:{properties:{action_link:e.action_link,email_otp:e.email_otp,hashed_token:e.hashed_token,redirect_to:e.redirect_to,verification_type:e.verification_type},user:Object.assign({},tc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function t_(e){return e}var tA=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r},tE=function(){var e,t,r,n,a,s,i,o,u,c;function l(e){var t=e.url,r=e.headers,n=e.fetch;(0,d.A)(this,l),this.url=void 0===t?"":t,this.headers=void 0===r?{}:r,this.fetch=eK(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}return(0,v.A)(l,[{key:"signOut",value:(e=(0,U.A)(y().mark(function e(t){var r,n=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:"global",e.prev=1,e.next=4,tv(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(r),{headers:this.headers,jwt:t,noResolveJson:!0});case 4:return e.abrupt("return",{data:null,error:null});case 7:if(e.prev=7,e.t0=e.catch(1),!e8(e.t0)){e.next=11;break}return e.abrupt("return",{data:null,error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[1,7]])})),function(t){return e.apply(this,arguments)})},{key:"inviteUserByEmail",value:(t=(0,U.A)(y().mark(function e(t){var r,n=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.prev=1,e.next=4,tv(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:tk});case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!e8(e.t0)){e.next=11;break}return e.abrupt("return",{data:{user:null},error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[1,7]])})),function(e){return t.apply(this,arguments)})},{key:"generateLink",value:(r=(0,U.A)(y().mark(function e(t){var r,n,a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.options,a=Object.assign(Object.assign({},n=tA(t,["options"])),r),"newEmail"in n&&(a.new_email=null==n?void 0:n.newEmail,delete a.newEmail),e.next=6,tv(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:a,headers:this.headers,xform:tx,redirectTo:null==r?void 0:r.redirectTo});case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),!e8(e.t0)){e.next=13;break}return e.abrupt("return",{data:{properties:null,user:null},error:e.t0});case 13:throw e.t0;case 14:case"end":return e.stop()}},e,this,[[0,9]])})),function(e){return r.apply(this,arguments)})},{key:"createUser",value:(n=(0,U.A)(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tv(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:t,headers:this.headers,xform:tk});case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!e8(e.t0)){e.next=10;break}return e.abrupt("return",{data:{user:null},error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return n.apply(this,arguments)})},{key:"listUsers",value:(a=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u,c,l,h,f,p;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={nextPage:null,lastPage:0,total:0},e.next=4,tv(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(r=null==t?void 0:t.page)||void 0===r?void 0:r.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(a=null==t?void 0:t.perPage)||void 0===a?void 0:a.toString())&&void 0!==s?s:""},xform:t_});case 4:if(!(l=e.sent).error){e.next=7;break}throw l.error;case 7:return e.next=9,l.json();case 9:return h=e.sent,f=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,(p=null!==(u=null===(o=l.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==u?u:[]).length>0&&(p.forEach(function(e){var t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);c["".concat(r,"Page")]=t}),c.total=parseInt(f)),e.abrupt("return",{data:Object.assign(Object.assign({},h),c),error:null});case 16:if(e.prev=16,e.t0=e.catch(0),!e8(e.t0)){e.next=20;break}return e.abrupt("return",{data:{users:[]},error:e.t0});case 20:throw e.t0;case 21:case"end":return e.stop()}},e,this,[[0,16]])})),function(e){return a.apply(this,arguments)})},{key:"getUserById",value:(s=(0,U.A)(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tv(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(t),{headers:this.headers,xform:tk});case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!e8(e.t0)){e.next=10;break}return e.abrupt("return",{data:{user:null},error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return s.apply(this,arguments)})},{key:"updateUserById",value:(i=(0,U.A)(y().mark(function e(t,r){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tv(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(t),{body:r,headers:this.headers,xform:tk});case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!e8(e.t0)){e.next=10;break}return e.abrupt("return",{data:{user:null},error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])})),function(e,t){return i.apply(this,arguments)})},{key:"deleteUser",value:(o=(0,U.A)(y().mark(function e(t){var r,n=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]&&n[1],e.prev=1,e.next=4,tv(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(t),{headers:this.headers,body:{should_soft_delete:r},xform:tk});case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!e8(e.t0)){e.next=11;break}return e.abrupt("return",{data:{user:null},error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[1,7]])})),function(e){return o.apply(this,arguments)})},{key:"_listFactors",value:(u=(0,U.A)(y().mark(function e(t){var r,n,a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tv(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(t.userId,"/factors"),{headers:this.headers,xform:function(e){return{data:{factors:e},error:null}}});case 3:return n=(r=e.sent).data,a=r.error,e.abrupt("return",{data:n,error:a});case 9:if(e.prev=9,e.t0=e.catch(0),!e8(e.t0)){e.next=13;break}return e.abrupt("return",{data:null,error:e.t0});case 13:throw e.t0;case 14:case"end":return e.stop()}},e,this,[[0,9]])})),function(e){return u.apply(this,arguments)})},{key:"_deleteFactor",value:(c=(0,U.A)(y().mark(function e(t){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tv(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(t.userId,"/factors/").concat(t.id),{headers:this.headers});case 3:return r=e.sent,e.abrupt("return",{data:r,error:null});case 7:if(e.prev=7,e.t0=e.catch(0),!e8(e.t0)){e.next=11;break}return e.abrupt("return",{data:null,error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[0,7]])})),function(e){return c.apply(this,arguments)})}]),l}(),tS={getItem:function(e){return eH()?globalThis.localStorage.getItem(e):null},setItem:function(e,t){eH()&&globalThis.localStorage.setItem(e,t)},removeItem:function(e){eH()&&globalThis.localStorage.removeItem(e)}};function tO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:function(t){return e[t]||null},setItem:function(t,r){e[t]=r},removeItem:function(t){delete e[t]}}}function tT(e){var t=tj();return function(){var r,n=(0,w.A)(e);return r=t?Reflect.construct(n,arguments,(0,w.A)(this).constructor):n.apply(this,arguments),(0,k.A)(this,r)}}function tj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tj=function(){return!!e})()}var tP={debug:!!(globalThis&&eH()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))},tC=function(e){(0,m.A)(r,e);var t=tT(r);function r(e){var n;return(0,d.A)(this,r),(n=t.call(this,e)).isAcquireTimeout=!0,n}return(0,v.A)(r)}((0,x.A)(Error)),tR=function(e){(0,m.A)(r,e);var t=tT(r);function r(){return(0,d.A)(this,r),t.apply(this,arguments)}return(0,v.A)(r)}(tC);function tI(e,t,r){return tN.apply(this,arguments)}function tN(){return(tN=(0,U.A)(y().mark(function e(t,r,n){var a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return tP.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,r),a=new globalThis.AbortController,r>0&&setTimeout(function(){a.abort(),tP.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},r),e.next=5,Promise.resolve().then(function(){return globalThis.navigator.locks.request(t,0===r?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},function(){var e=(0,U.A)(y().mark(function e(a){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=11;break}return tP.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name),e.prev=2,e.next=5,n();case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,tP.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name),e.finish(6);case 9:e.next=31;break;case 11:if(0!==r){e.next=16;break}throw tP.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new tR('Acquiring an exclusive Navigator LockManager lock "'.concat(t,'" immediately failed'));case 16:if(!tP.debug){e.next=27;break}return e.prev=17,e.next=20,globalThis.navigator.locks.query();case 20:console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e.sent,null,"  ")),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(17),console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e.t0);case 27:return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),e.next=30,n();case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}},e,null,[[2,,6,9],[17,24]])}));return function(t){return e.apply(this,arguments)}}())});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();var tL={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/".concat(eM)},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function tU(e,t,r){return tD.apply(this,arguments)}function tD(){return(tD=(0,U.A)(y().mark(function e(t,r,n){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var tB=function(){var e,t,r,n,a,s,i,o,u,c,l,h,f,p,b,g,m,k,w,x,_,A,E,S,O,T,j,P,C,R,I,N,L,D,B,M,z,F,q,J,H,K,W,G,V,$,Y,Z,Q,ee,et,er,en,ea,es,ei,eo,eu;function ec(e){var t,r,n,a=this;(0,d.A)(this,ec),this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ec.nextInstanceID,ec.nextInstanceID+=1,this.instanceID>0&&eq()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");var s=Object.assign(Object.assign({},tL),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new tE({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=eK(s.fetch),this.lock=s.lock||tU,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:eq()&&(null===(r=null==globalThis?void 0:globalThis.navigator)||void 0===r?void 0:r.locks)?this.lock=tI:this.lock=tU,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:eH()?this.storage=tS:(this.memoryStorage={},this.storage=tO(this.memoryStorage)):(this.memoryStorage={},this.storage=tO(this.memoryStorage)),eq()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",(t=(0,U.A)(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a._debug("received broadcast notification from other tab or client",t),e.next=3,a._notifyAllSubscribers(t.data.event,t.data.session,!1);case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}))}this.initialize()}return(0,v.A)(ec,[{key:"_debug",value:function(){if(this.logDebugMessages){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.apply(this,["GoTrueClient@".concat(this.instanceID," (").concat(eM,") ").concat(new Date().toISOString())].concat(t))}return this}},{key:"initialize",value:(e=(0,U.A)(y().mark(function e(){var t=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.initializePromise){e.next=4;break}return e.next=3,this.initializePromise;case 3:case 7:return e.abrupt("return",e.sent);case 4:return this.initializePromise=(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initialize();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))(),e.next=7,this.initializePromise;case 8:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_initialize",value:(t=(0,U.A)(y().mark(function e(){var t,r,n,a,s,i,o,u,c,l=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=function(e){var t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach(function(e,r){t[r]=e})}catch(e){}return r.searchParams.forEach(function(e,r){t[r]=e}),t}(window.location.href),n="none",!this._isImplicitGrantCallback(r)){e.next=7;break}n="implicit",e.next=11;break;case 7:return e.next=9,this._isPKCECallback(r);case 9:if(!e.sent){e.next=11;break}n="pkce";case 11:if(!(eq()&&this.detectSessionInUrl&&"none"!==n)){e.next=32;break}return e.next=14,this._getSessionFromURL(r,n);case 14:var h;if(s=(a=e.sent).data,!(i=a.error)){e.next=26;break}if(this._debug("#_initialize()","error detecting session from URL",i),!(e8(h=i)&&"AuthImplicitGrantRedirectError"===h.name)||!("identity_already_exists"===(o=null===(t=i.details)||void 0===t?void 0:t.code)||"identity_not_found"===o||"single_identity_not_deletable"===o)){e.next=23;break}return e.abrupt("return",{error:i});case 23:return e.next=25,this._removeSession();case 25:return e.abrupt("return",{error:i});case 26:return u=s.session,c=s.redirectType,this._debug("#_initialize()","detected session in URL",u,"redirect type",c),e.next=30,this._saveSession(u);case 30:return setTimeout((0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("recovery"!==c){e.next=5;break}return e.next=3,l._notifyAllSubscribers("PASSWORD_RECOVERY",u);case 3:e.next=7;break;case 5:return e.next=7,l._notifyAllSubscribers("SIGNED_IN",u);case 7:case"end":return e.stop()}},e)})),0),e.abrupt("return",{error:null});case 32:return e.next=34,this._recoverAndRefresh();case 34:return e.abrupt("return",{error:null});case 37:if(e.prev=37,e.t0=e.catch(0),!e8(e.t0)){e.next=41;break}return e.abrupt("return",{error:e.t0});case 41:return e.abrupt("return",{error:new e9("Unexpected error during initialization",e.t0)});case 42:return e.prev=42,e.next=45,this._handleVisibilityChange();case 45:return this._debug("#_initialize()","end"),e.finish(42);case 47:case"end":return e.stop()}},e,this,[[0,37,42,47]])})),function(){return t.apply(this,arguments)})},{key:"signInAnonymously",value:(r=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u,c;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tv(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(r=null==t?void 0:t.options)||void 0===r?void 0:r.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(a=null==t?void 0:t.options)||void 0===a?void 0:a.captchaToken}},xform:tg});case 3:if(i=(s=e.sent).data,!((o=s.error)||!i)){e.next=7;break}return e.abrupt("return",{data:{user:null,session:null},error:o});case 7:if(u=i.session,c=i.user,!i.session){e.next=14;break}return e.next=12,this._saveSession(i.session);case 12:return e.next=14,this._notifyAllSubscribers("SIGNED_IN",u);case 14:return e.abrupt("return",{data:{user:c,session:u},error:null});case 17:if(e.prev=17,e.t0=e.catch(0),!e8(e.t0)){e.next=21;break}return e.abrupt("return",{data:{user:null,session:null},error:e.t0});case 21:throw e.t0;case 22:case"end":return e.stop()}},e,this,[[0,17]])})),function(e){return r.apply(this,arguments)})},{key:"signUp",value:(n=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u,c,l,h,f,p,d,v,b,g,m,k,w;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!("email"in t)){e.next=18;break}if(i=t.email,o=t.password,u=t.options,c=null,l=null,"pkce"!==this.flowType){e.next=13;break}return e.next=9,e1(this.storage,this.storageKey);case 9:h=e.sent,c=(f=(0,el.A)(h,2))[0],l=f[1];case 13:return e.next=15,tv(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null==u?void 0:u.emailRedirectTo,body:{email:i,password:o,data:null!==(r=null==u?void 0:u.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null==u?void 0:u.captchaToken},code_challenge:c,code_challenge_method:l},xform:tg});case 15:case 22:s=e.sent,e.next=26;break;case 18:if(!("phone"in t)){e.next=25;break}return p=t.phone,d=t.password,v=t.options,e.next=22,tv(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:p,password:d,data:null!==(n=null==v?void 0:v.data)&&void 0!==n?n:{},channel:null!==(a=null==v?void 0:v.channel)&&void 0!==a?a:"sms",gotrue_meta_security:{captcha_token:null==v?void 0:v.captchaToken}},xform:tg});case 25:throw new tn("You must provide either an email or phone number and a password");case 26:if(g=(b=s).data,!((m=b.error)||!g)){e.next=29;break}return e.abrupt("return",{data:{user:null,session:null},error:m});case 29:if(k=g.session,w=g.user,!g.session){e.next=36;break}return e.next=34,this._saveSession(g.session);case 34:return e.next=36,this._notifyAllSubscribers("SIGNED_IN",k);case 36:return e.abrupt("return",{data:{user:w,session:k},error:null});case 39:if(e.prev=39,e.t0=e.catch(0),!e8(e.t0)){e.next=43;break}return e.abrupt("return",{data:{user:null,session:null},error:e.t0});case 43:throw e.t0;case 44:case"end":return e.stop()}},e,this,[[0,39]])})),function(e){return n.apply(this,arguments)})},{key:"signInWithPassword",value:(a=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u,c,l,h;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!("email"in t)){e.next=8;break}return n=t.email,a=t.password,s=t.options,e.next=5,tv(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:a,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:tm});case 5:case 12:r=e.sent,e.next=16;break;case 8:if(!("phone"in t)){e.next=15;break}return i=t.phone,o=t.password,u=t.options,e.next=12,tv(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:null==u?void 0:u.captchaToken}},xform:tm});case 15:throw new tn("You must provide either an email or phone number and a password");case 16:if(l=(c=r).data,!(h=c.error)){e.next=21;break}return e.abrupt("return",{data:{user:null,session:null},error:h});case 21:if(!(!l||!l.session||!l.user)){e.next=23;break}return e.abrupt("return",{data:{user:null,session:null},error:new tr});case 23:if(!l.session){e.next=28;break}return e.next=26,this._saveSession(l.session);case 26:return e.next=28,this._notifyAllSubscribers("SIGNED_IN",l.session);case 28:return e.abrupt("return",{data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:h});case 31:if(e.prev=31,e.t0=e.catch(0),!e8(e.t0)){e.next=35;break}return e.abrupt("return",{data:{user:null,session:null},error:e.t0});case 35:throw e.t0;case 36:case"end":return e.stop()}},e,this,[[0,31]])})),function(e){return a.apply(this,arguments)})},{key:"signInWithOAuth",value:(s=(0,U.A)(y().mark(function e(t){var r,n,a,s;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._handleProviderSignIn(t.provider,{redirectTo:null===(r=t.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=t.options)||void 0===n?void 0:n.scopes,queryParams:null===(a=t.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:null===(s=t.options)||void 0===s?void 0:s.skipBrowserRedirect});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"exchangeCodeForSession",value:(i=(0,U.A)(y().mark(function e(t){var r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializePromise;case 2:return e.abrupt("return",this._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r._exchangeCodeForSession(t));case 1:case"end":return e.stop()}},e)}))));case 3:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"_exchangeCodeForSession",value:(o=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u,c;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eG(this.storage,"".concat(this.storageKey,"-code-verifier"));case 2:return n=(null!=(r=e.sent)?r:"").split("/"),s=(a=(0,el.A)(n,2))[0],i=a[1],e.prev=4,e.next=7,tv(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:tg});case 7:return u=(o=e.sent).data,c=o.error,e.next=12,eV(this.storage,"".concat(this.storageKey,"-code-verifier"));case 12:if(!c){e.next=14;break}throw c;case 14:if(!(!u||!u.session||!u.user)){e.next=16;break}return e.abrupt("return",{data:{user:null,session:null,redirectType:null},error:new tr});case 16:if(!u.session){e.next=21;break}return e.next=19,this._saveSession(u.session);case 19:return e.next=21,this._notifyAllSubscribers("SIGNED_IN",u.session);case 21:return e.abrupt("return",{data:Object.assign(Object.assign({},u),{redirectType:null!=i?i:null}),error:c});case 24:if(e.prev=24,e.t0=e.catch(4),!e8(e.t0)){e.next=28;break}return e.abrupt("return",{data:{user:null,session:null,redirectType:null},error:e.t0});case 28:throw e.t0;case 29:case"end":return e.stop()}},e,this,[[4,24]])})),function(e){return o.apply(this,arguments)})},{key:"signInWithIdToken",value:(u=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u,c;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.options,n=t.provider,a=t.token,s=t.access_token,i=t.nonce,e.next=4,tv(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:a,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:tg});case 4:if(u=(o=e.sent).data,!(c=o.error)){e.next=10;break}return e.abrupt("return",{data:{user:null,session:null},error:c});case 10:if(!(!u||!u.session||!u.user)){e.next=12;break}return e.abrupt("return",{data:{user:null,session:null},error:new tr});case 12:if(!u.session){e.next=17;break}return e.next=15,this._saveSession(u.session);case 15:return e.next=17,this._notifyAllSubscribers("SIGNED_IN",u.session);case 17:return e.abrupt("return",{data:u,error:c});case 20:if(e.prev=20,e.t0=e.catch(0),!e8(e.t0)){e.next=24;break}return e.abrupt("return",{data:{user:null,session:null},error:e.t0});case 24:throw e.t0;case 25:case"end":return e.stop()}},e,this,[[0,20]])})),function(e){return u.apply(this,arguments)})},{key:"signInWithOtp",value:(c=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u,c,l,h,f,p,d,v,b,g,m;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!("email"in t)){e.next=18;break}if(o=t.email,u=t.options,c=null,l=null,"pkce"!==this.flowType){e.next=13;break}return e.next=9,e1(this.storage,this.storageKey);case 9:h=e.sent,c=(f=(0,el.A)(h,2))[0],l=f[1];case 13:return e.next=15,tv(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:o,data:null!==(r=null==u?void 0:u.data)&&void 0!==r?r:{},create_user:null===(n=null==u?void 0:u.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==u?void 0:u.captchaToken},code_challenge:c,code_challenge_method:l},redirectTo:null==u?void 0:u.emailRedirectTo});case 15:return p=e.sent.error,e.abrupt("return",{data:{user:null,session:null},error:p});case 18:if(!("phone"in t)){e.next=26;break}return d=t.phone,v=t.options,e.next=22,tv(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:d,data:null!==(a=null==v?void 0:v.data)&&void 0!==a?a:{},create_user:null===(s=null==v?void 0:v.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==v?void 0:v.captchaToken},channel:null!==(i=null==v?void 0:v.channel)&&void 0!==i?i:"sms"}});case 22:return g=(b=e.sent).data,m=b.error,e.abrupt("return",{data:{user:null,session:null,messageId:null==g?void 0:g.message_id},error:m});case 26:throw new tn("You must provide either an email or phone number.");case 29:if(e.prev=29,e.t0=e.catch(0),!e8(e.t0)){e.next=33;break}return e.abrupt("return",{data:{user:null,session:null},error:e.t0});case 33:throw e.t0;case 34:case"end":return e.stop()}},e,this,[[0,29]])})),function(e){return c.apply(this,arguments)})},{key:"verifyOtp",value:(l=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u,c,l;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=void 0,s=void 0,"options"in t&&(a=null===(r=t.options)||void 0===r?void 0:r.redirectTo,s=null===(n=t.options)||void 0===n?void 0:n.captchaToken),e.next=6,tv(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:tg});case 6:if(o=(i=e.sent).data,!(u=i.error)){e.next=11;break}throw u;case 11:if(o){e.next=13;break}throw Error("An error occurred on token verification.");case 13:if(c=o.session,l=o.user,!(null==c?void 0:c.access_token)){e.next=20;break}return e.next=18,this._saveSession(c);case 18:return e.next=20,this._notifyAllSubscribers("recovery"==t.type?"PASSWORD_RECOVERY":"SIGNED_IN",c);case 20:return e.abrupt("return",{data:{user:l,session:c},error:null});case 23:if(e.prev=23,e.t0=e.catch(0),!e8(e.t0)){e.next=27;break}return e.abrupt("return",{data:{user:null,session:null},error:e.t0});case 27:throw e.t0;case 28:case"end":return e.stop()}},e,this,[[0,23]])})),function(e){return l.apply(this,arguments)})},{key:"signInWithSSO",value:(h=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=null,i=null,"pkce"!==this.flowType){e.next=11;break}return e.next=7,e1(this.storage,this.storageKey);case 7:o=e.sent,s=(u=(0,el.A)(o,2))[0],i=u[1];case 11:return e.next=13,tv(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:null!==(n=null===(r=t.options)||void 0===r?void 0:r.redirectTo)&&void 0!==n?n:void 0}),(null===(a=null==t?void 0:t.options)||void 0===a?void 0:a.captchaToken)?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:tw});case 13:return e.abrupt("return",e.sent);case 16:if(e.prev=16,e.t0=e.catch(0),!e8(e.t0)){e.next=20;break}return e.abrupt("return",{data:null,error:e.t0});case 20:throw e.t0;case 21:case"end":return e.stop()}},e,this,[[0,16]])})),function(e){return h.apply(this,arguments)})},{key:"reauthenticate",value:(f=(0,U.A)(y().mark(function e(){var t=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializePromise;case 2:return e.next=4,this._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._reauthenticate();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(){return f.apply(this,arguments)})},{key:"_reauthenticate",value:(p=(0,U.A)(y().mark(function e(){var t=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._useSession(function(){var e=(0,U.A)(y().mark(function e(r){var n,a,s;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.data.session,!(a=r.error)){e.next=3;break}throw a;case 3:if(n){e.next=5;break}throw new tt;case 5:return e.next=7,tv(t.fetch,"GET","".concat(t.url,"/reauthenticate"),{headers:t.headers,jwt:n.access_token});case 7:return s=e.sent.error,e.abrupt("return",{data:{user:null,session:null},error:s});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!e8(e.t0)){e.next=10;break}return e.abrupt("return",{data:{user:null,session:null},error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])})),function(){return p.apply(this,arguments)})},{key:"resend",value:(b=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u,c,l,h,f;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r="".concat(this.url,"/resend"),!("email"in t)){e.next=11;break}return n=t.email,a=t.type,s=t.options,e.next=6,tv(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});case 6:return i=e.sent.error,e.abrupt("return",{data:{user:null,session:null},error:i});case 11:if(!("phone"in t)){e.next=19;break}return o=t.phone,u=t.type,c=t.options,e.next=15,tv(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:null==c?void 0:c.captchaToken}}});case 15:return h=(l=e.sent).data,f=l.error,e.abrupt("return",{data:{user:null,session:null,messageId:null==h?void 0:h.message_id},error:f});case 19:throw new tn("You must provide either an email or phone number and a type");case 22:if(e.prev=22,e.t0=e.catch(0),!e8(e.t0)){e.next=26;break}return e.abrupt("return",{data:{user:null,session:null},error:e.t0});case 26:throw e.t0;case 27:case"end":return e.stop()}},e,this,[[0,22]])})),function(e){return b.apply(this,arguments)})},{key:"getSession",value:(g=(0,U.A)(y().mark(function e(){var t,r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializePromise;case 2:return e.next=4,this._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r._useSession(function(){var e=(0,U.A)(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})));case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)})},{key:"_acquireLock",value:(m=(0,U.A)(y().mark(function e(t,r){var n,a,s=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._debug("#_acquireLock","begin",t),e.prev=1,!this.lockAcquired){e.next=7;break}return n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return e.next=4,r();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}))(),this.pendingInLock.push((0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a;case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}},e,null,[[0,5]])}))()),e.abrupt("return",a);case 7:return e.next=9,this.lock("lock:".concat(this.storageKey),t,(0,U.A)(y().mark(function e(){var t,n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s._debug("#_acquireLock","lock acquired for storage key",s.storageKey),e.prev=1,s.lockAcquired=!0,t=r(),s.pendingInLock.push((0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}},e,null,[[0,5]])}))()),e.next=7,t;case 7:if(!s.pendingInLock.length){e.next=14;break}return n=(0,X.A)(s.pendingInLock),e.next=11,Promise.all(n);case 11:s.pendingInLock.splice(0,n.length),e.next=7;break;case 14:return e.next=16,t;case 16:return e.abrupt("return",e.sent);case 17:return e.prev=17,s._debug("#_acquireLock","lock released for storage key",s.storageKey),s.lockAcquired=!1,e.finish(17);case 21:case"end":return e.stop()}},e,null,[[1,,17,21]])})));case 9:return e.abrupt("return",e.sent);case 10:return e.prev=10,this._debug("#_acquireLock","end"),e.finish(10);case 13:case"end":return e.stop()}},e,this,[[1,,10,13]])})),function(e,t){return m.apply(this,arguments)})},{key:"_useSession",value:(k=(0,U.A)(y().mark(function e(t){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._debug("#_useSession","begin"),e.prev=1,e.next=4,this.__loadSession();case 4:return r=e.sent,e.next=7,t(r);case 7:return e.abrupt("return",e.sent);case 8:return e.prev=8,this._debug("#_useSession","end"),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[1,,8,11]])})),function(e){return k.apply(this,arguments)})},{key:"__loadSession",value:(w=(0,U.A)(y().mark(function e(){var t,r,n,a,s,i,o,u=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack),e.prev=2,t=null,e.next=6,eG(this.storage,this.storageKey);case 6:if(r=e.sent,this._debug("#getSession()","session from storage",r),!(null!==r)){e.next=16;break}if(!this._isValidSession(r)){e.next=13;break}t=r,e.next=16;break;case 13:return this._debug("#getSession()","session from storage is not valid"),e.next=16,this._removeSession();case 16:if(t){e.next=18;break}return e.abrupt("return",{data:{session:null},error:null});case 18:if(n=!!t.expires_at&&t.expires_at<=Date.now()/1e3,this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",t.expires_at),n){e.next=23;break}return this.storage.isServer&&(a=this.suppressGetSessionWarning,t=new Proxy(t,{get:function(e,t,r){return a||"user"!==t||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,u.suppressGetSessionWarning=!0),Reflect.get(e,t,r)}})),e.abrupt("return",{data:{session:t},error:null});case 23:return e.next=25,this._callRefreshToken(t.refresh_token);case 25:if(i=(s=e.sent).session,!(o=s.error)){e.next=30;break}return e.abrupt("return",{data:{session:null},error:o});case 30:return e.abrupt("return",{data:{session:i},error:null});case 31:return e.prev=31,this._debug("#__loadSession()","end"),e.finish(31);case 34:case"end":return e.stop()}},e,this,[[2,,31,34]])})),function(){return w.apply(this,arguments)})},{key:"getUser",value:(x=(0,U.A)(y().mark(function e(t){var r,n=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,this._getUser(t);case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,this.initializePromise;case 6:return e.next=8,this._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._getUser();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})},{key:"_getUser",value:(_=(0,U.A)(y().mark(function e(t){var r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=5;break}return e.next=4,tv(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:t,xform:tk});case 4:case 7:return e.abrupt("return",e.sent);case 5:return e.next=7,this._useSession(function(){var e=(0,U.A)(y().mark(function e(t){var n,a,s,i,o;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.data,!(o=t.error)){e.next=3;break}throw o;case 3:if(!(!(null===(n=i.session)||void 0===n?void 0:n.access_token)&&!r.hasCustomAuthorizationHeader)){e.next=5;break}return e.abrupt("return",{data:{user:null},error:new tt});case 5:return e.next=7,tv(r.fetch,"GET","".concat(r.url,"/user"),{headers:r.headers,jwt:null!==(s=null===(a=i.session)||void 0===a?void 0:a.access_token)&&void 0!==s?s:void 0,xform:tk});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:var n;if(e.prev=10,e.t0=e.catch(0),!e8(e.t0)){e.next=19;break}if(!(e8(n=e.t0)&&"AuthSessionMissingError"===n.name)){e.next=18;break}return e.next=16,this._removeSession();case 16:return e.next=18,eV(this.storage,"".concat(this.storageKey,"-code-verifier"));case 18:return e.abrupt("return",{data:{user:null},error:e.t0});case 19:throw e.t0;case 20:case"end":return e.stop()}},e,this,[[0,10]])})),function(e){return _.apply(this,arguments)})},{key:"updateUser",value:(A=(0,U.A)(y().mark(function e(t){var r,n=this,a=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.initializePromise;case 3:return e.next=5,this._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._updateUser(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),function(e){return A.apply(this,arguments)})},{key:"_updateUser",value:(E=(0,U.A)(y().mark(function e(t){var r,n=this,a=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.prev=1,e.next=4,this._useSession(function(){var e=(0,U.A)(y().mark(function e(a){var s,i,o,u,c,l,h,f,p,d;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.data,!(i=a.error)){e.next=3;break}throw i;case 3:if(s.session){e.next=5;break}throw new tt;case 5:if(o=s.session,u=null,c=null,!("pkce"===n.flowType&&null!=t.email)){e.next=16;break}return e.next=12,e1(n.storage,n.storageKey);case 12:l=e.sent,u=(h=(0,el.A)(l,2))[0],c=h[1];case 16:return e.next=18,tv(n.fetch,"PUT","".concat(n.url,"/user"),{headers:n.headers,redirectTo:null==r?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:c}),jwt:o.access_token,xform:tk});case 18:if(p=(f=e.sent).data,!(d=f.error)){e.next=23;break}throw d;case 23:return o.user=p.user,e.next=26,n._saveSession(o);case 26:return e.next=28,n._notifyAllSubscribers("USER_UPDATED",o);case 28:return e.abrupt("return",{data:{user:o.user},error:null});case 29:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!e8(e.t0)){e.next=11;break}return e.abrupt("return",{data:{user:null},error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[1,7]])})),function(e){return E.apply(this,arguments)})},{key:"_decodeJWT",value:function(e){return eY(e)}},{key:"setSession",value:(S=(0,U.A)(y().mark(function e(t){var r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializePromise;case 2:return e.next=4,this._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._setSession(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e){return S.apply(this,arguments)})},{key:"_setSession",value:(O=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u,c,l,h,f;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(!t.access_token||!t.refresh_token)){e.next=3;break}throw new tt;case 3:if(n=r=Date.now()/1e3,a=!0,s=null,(i=eY(t.access_token)).exp&&(a=(n=i.exp)<=r),!a){e.next=22;break}return e.next=12,this._callRefreshToken(t.refresh_token);case 12:if(u=(o=e.sent).session,!(c=o.error)){e.next=17;break}return e.abrupt("return",{data:{user:null,session:null},error:c});case 17:if(u){e.next=19;break}return e.abrupt("return",{data:{user:null,session:null},error:null});case 19:s=u,e.next=34;break;case 22:return e.next=24,this._getUser(t.access_token);case 24:if(h=(l=e.sent).data,!(f=l.error)){e.next=29;break}throw f;case 29:return s={access_token:t.access_token,refresh_token:t.refresh_token,user:h.user,token_type:"bearer",expires_in:n-r,expires_at:n},e.next=32,this._saveSession(s);case 32:return e.next=34,this._notifyAllSubscribers("SIGNED_IN",s);case 34:return e.abrupt("return",{data:{user:s.user,session:s},error:null});case 37:if(e.prev=37,e.t0=e.catch(0),!e8(e.t0)){e.next=41;break}return e.abrupt("return",{data:{session:null,user:null},error:e.t0});case 41:throw e.t0;case 42:case"end":return e.stop()}},e,this,[[0,37]])})),function(e){return O.apply(this,arguments)})},{key:"refreshSession",value:(T=(0,U.A)(y().mark(function e(t){var r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializePromise;case 2:return e.next=4,this._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._refreshSession(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e){return T.apply(this,arguments)})},{key:"_refreshSession",value:(j=(0,U.A)(y().mark(function e(t){var r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._useSession(function(){var e=(0,U.A)(y().mark(function e(n){var a,s,i,o,u,c;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}if(s=n.data,!(i=n.error)){e.next=4;break}throw i;case 4:t=null!==(a=s.session)&&void 0!==a?a:void 0;case 5:if(null==t?void 0:t.refresh_token){e.next=7;break}throw new tt;case 7:return e.next=9,r._callRefreshToken(t.refresh_token);case 9:if(u=(o=e.sent).session,!(c=o.error)){e.next=14;break}return e.abrupt("return",{data:{user:null,session:null},error:c});case 14:if(u){e.next=16;break}return e.abrupt("return",{data:{user:null,session:null},error:null});case 16:return e.abrupt("return",{data:{user:u.user,session:u},error:null});case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!e8(e.t0)){e.next=10;break}return e.abrupt("return",{data:{user:null,session:null},error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return j.apply(this,arguments)})},{key:"_getSessionFromURL",value:(P=(0,U.A)(y().mark(function e(t,r){var n,a,s,i,o,u,c,l,h,f,p,d,v,b,g,m,k,w,x,_;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,eq()){e.next=3;break}throw new ta("No browser detected.");case 3:if(!(t.error||t.error_description||t.error_code)){e.next=5;break}throw new ta(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});case 5:e.t0=r,e.next="implicit"===e.t0?8:"pkce"===e.t0?11:14;break;case 8:if("pkce"!==this.flowType){e.next=10;break}throw new ts("Not a valid PKCE flow url.");case 10:case 13:return e.abrupt("break",14);case 11:if("implicit"!==this.flowType){e.next=13;break}throw new ta("Not a valid implicit grant flow url.");case 14:if("pkce"!==r){e.next=29;break}if(this._debug("#_initialize()","begin","is PKCE flow",!0),t.code){e.next=18;break}throw new ts("No code detected.");case 18:return e.next=20,this._exchangeCodeForSession(t.code);case 20:if(a=(n=e.sent).data,!(s=n.error)){e.next=25;break}throw s;case 25:return(i=new URL(window.location.href)).searchParams.delete("code"),window.history.replaceState(window.history.state,"",i.toString()),e.abrupt("return",{data:{session:a.session,redirectType:null},error:null});case 29:if(o=t.provider_token,u=t.provider_refresh_token,c=t.access_token,l=t.refresh_token,h=t.expires_in,f=t.expires_at,p=t.token_type,!(!c||!h||!l||!p)){e.next=32;break}throw new ta("No session defined in URL");case 32:return b=(d=Math.round(Date.now()/1e3))+(v=parseInt(h)),f&&(b=parseInt(f)),1e3*(g=b-d)<=3e4&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(g,"s, should have been closer to ").concat(v,"s")),d-(m=b-v)>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,b,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,b,d),e.next=42,this._getUser(c);case 42:if(w=(k=e.sent).data,!(x=k.error)){e.next=47;break}throw x;case 47:return _={provider_token:o,provider_refresh_token:u,access_token:c,expires_in:v,expires_at:b,refresh_token:l,token_type:p,user:w.user},window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),e.abrupt("return",{data:{session:_,redirectType:t.type},error:null});case 53:if(e.prev=53,e.t1=e.catch(0),!e8(e.t1)){e.next=57;break}return e.abrupt("return",{data:{session:null,redirectType:null},error:e.t1});case 57:throw e.t1;case 58:case"end":return e.stop()}},e,this,[[0,53]])})),function(e,t){return P.apply(this,arguments)})},{key:"_isImplicitGrantCallback",value:function(e){return!!(e.access_token||e.error_description)}},{key:"_isPKCECallback",value:(C=(0,U.A)(y().mark(function e(t){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eG(this.storage,"".concat(this.storageKey,"-code-verifier"));case 2:return r=e.sent,e.abrupt("return",!!(t.code&&r));case 4:case"end":return e.stop()}},e,this)})),function(e){return C.apply(this,arguments)})},{key:"signOut",value:(R=(0,U.A)(y().mark(function e(){var t,r=this,n=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{scope:"global"},e.next=3,this.initializePromise;case 3:return e.next=5,this._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._signOut(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),function(){return R.apply(this,arguments)})},{key:"_signOut",value:(I=(0,U.A)(y().mark(function e(){var t,r=this,n=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(n.length>0&&void 0!==n[0]?n[0]:{scope:"global"}).scope,e.next=3,this._useSession(function(){var e=(0,U.A)(y().mark(function e(n){var a,s,i,o,u;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.data,!(i=n.error)){e.next=3;break}return e.abrupt("return",{error:i});case 3:if(!(o=null===(a=s.session)||void 0===a?void 0:a.access_token)){e.next=12;break}return e.next=7,r.admin.signOut(o,t);case 7:if(!(u=e.sent.error)||e8(u)&&"AuthApiError"===u.name&&(404===u.status||401===u.status||403===u.status)){e.next=12;break}return e.abrupt("return",{error:u});case 12:if(!("others"!==t)){e.next=17;break}return e.next=15,r._removeSession();case 15:return e.next=17,eV(r.storage,"".concat(r.storageKey,"-code-verifier"));case 17:return e.abrupt("return",{error:null});case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(){return I.apply(this,arguments)})},{key:"onAuthStateChange",value:function(e){var t=this,r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:r,callback:e,unsubscribe:function(){t._debug("#unsubscribe()","state change callback with id removed",r),t.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initializePromise;case 2:return e.next=4,t._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t._emitInitialSession(r);case 1:case"end":return e.stop()}},e)})));case 4:case"end":return e.stop()}},e)}))(),{data:{subscription:n}}}},{key:"_emitInitialSession",value:(N=(0,U.A)(y().mark(function e(t){var r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._useSession(function(){var e=(0,U.A)(y().mark(function e(n){var a,s,i,o;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=n.data.session,!(o=n.error)){e.next=4;break}throw o;case 4:return e.next=6,null===(a=r.stateChangeEmitters.get(t))||void 0===a?void 0:a.callback("INITIAL_SESSION",i);case 6:r._debug("INITIAL_SESSION","callback id",t,"session",i),e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,null===(s=r.stateChangeEmitters.get(t))||void 0===s?void 0:s.callback("INITIAL_SESSION",null);case 13:r._debug("INITIAL_SESSION","callback id",t,"error",e.t0),console.error(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return N.apply(this,arguments)})},{key:"resetPasswordForEmail",value:(L=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},n=null,a=null,"pkce"!==this.flowType){e.next=11;break}return e.next=7,e1(this.storage,this.storageKey,!0);case 7:s=e.sent,n=(i=(0,el.A)(s,2))[0],a=i[1];case 11:return e.prev=11,e.next=14,tv(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo});case 14:return e.abrupt("return",e.sent);case 17:if(e.prev=17,e.t0=e.catch(11),!e8(e.t0)){e.next=21;break}return e.abrupt("return",{data:null,error:e.t0});case 21:throw e.t0;case 22:case"end":return e.stop()}},e,this,[[11,17]])})),function(e){return L.apply(this,arguments)})},{key:"getUserIdentities",value:(D=(0,U.A)(y().mark(function e(){var t,r,n,a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getUser();case 3:if(n=(r=e.sent).data,!(a=r.error)){e.next=8;break}throw a;case 8:return e.abrupt("return",{data:{identities:null!==(t=n.user.identities)&&void 0!==t?t:[]},error:null});case 11:if(e.prev=11,e.t0=e.catch(0),!e8(e.t0)){e.next=15;break}return e.abrupt("return",{data:null,error:e.t0});case 15:throw e.t0;case 16:case"end":return e.stop()}},e,this,[[0,11]])})),function(){return D.apply(this,arguments)})},{key:"linkIdentity",value:(B=(0,U.A)(y().mark(function e(t){var r,n,a,s,i=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._useSession(function(){var e=(0,U.A)(y().mark(function e(r){var n,a,s,o,u,c,l,h;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.data,!(l=r.error)){e.next=3;break}throw l;case 3:return e.next=5,i._getUrlForProvider("".concat(i.url,"/user/identities/authorize"),t.provider,{redirectTo:null===(n=t.options)||void 0===n?void 0:n.redirectTo,scopes:null===(a=t.options)||void 0===a?void 0:a.scopes,queryParams:null===(s=t.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});case 5:return h=e.sent,e.next=8,tv(i.fetch,"GET",h,{headers:i.headers,jwt:null!==(u=null===(o=c.session)||void 0===o?void 0:o.access_token)&&void 0!==u?u:void 0});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:if(a=(n=e.sent).data,!(s=n.error)){e.next=8;break}throw s;case 8:return!eq()||(null===(r=t.options)||void 0===r?void 0:r.skipBrowserRedirect)||window.location.assign(null==a?void 0:a.url),e.abrupt("return",{data:{provider:t.provider,url:null==a?void 0:a.url},error:null});case 12:if(e.prev=12,e.t0=e.catch(0),!e8(e.t0)){e.next=16;break}return e.abrupt("return",{data:{provider:t.provider,url:null},error:e.t0});case 16:throw e.t0;case 17:case"end":return e.stop()}},e,this,[[0,12]])})),function(e){return B.apply(this,arguments)})},{key:"unlinkIdentity",value:(M=(0,U.A)(y().mark(function e(t){var r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._useSession(function(){var e=(0,U.A)(y().mark(function e(n){var a,s,i,o;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.data,!(o=n.error)){e.next=3;break}throw o;case 3:return e.next=5,tv(r.fetch,"DELETE","".concat(r.url,"/user/identities/").concat(t.identity_id),{headers:r.headers,jwt:null!==(s=null===(a=i.session)||void 0===a?void 0:a.access_token)&&void 0!==s?s:void 0});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!e8(e.t0)){e.next=10;break}return e.abrupt("return",{data:null,error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return M.apply(this,arguments)})},{key:"_refreshAccessToken",value:(z=(0,U.A)(y().mark(function e(t){var r,n,a=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="#_refreshAccessToken(".concat(t.substring(0,5),"...)"),this._debug(r,"begin"),e.prev=2,n=Date.now(),e.next=6,function(e,t){return new Promise(function(r,n){(0,U.A)(y().mark(function a(){var s,i;return y().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:s=0;case 1:if(!(s<1/0)){a.next=19;break}return a.prev=2,a.next=5,e(s);case 5:if(i=a.sent,t(s,null,i)){a.next=9;break}return r(i),a.abrupt("return");case 9:a.next=16;break;case 11:if(a.prev=11,a.t0=a.catch(2),t(s,a.t0)){a.next=16;break}return n(a.t0),a.abrupt("return");case 16:s++,a.next=1;break;case 19:case"end":return a.stop()}},a,null,[[2,11]])}))()})}(function(){var e=(0,U.A)(y().mark(function e(n){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>0)){e.next=3;break}return e.next=3,function(e){return eX.apply(this,arguments)}(200*Math.pow(2,n-1));case 3:return a._debug(r,"refreshing attempt",n),e.next=6,tv(a.fetch,"POST","".concat(a.url,"/token?grant_type=refresh_token"),{body:{refresh_token:t},headers:a.headers,xform:tg});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e,t){var r=200*Math.pow(2,e);return t&&to(t)&&Date.now()+r-n<3e4});case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(2),this._debug(r,"error",e.t0),!e8(e.t0)){e.next=14;break}return e.abrupt("return",{data:{session:null,user:null},error:e.t0});case 14:throw e.t0;case 15:return e.prev=15,this._debug(r,"end"),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[2,9,15,18]])})),function(e){return z.apply(this,arguments)})},{key:"_isValidSession",value:function(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}},{key:"_handleProviderSignIn",value:(F=(0,U.A)(y().mark(function e(t,r){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getUrlForProvider("".concat(this.url,"/authorize"),t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});case 2:return n=e.sent,this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),eq()&&!r.skipBrowserRedirect&&window.location.assign(n),e.abrupt("return",{data:{provider:t,url:n},error:null});case 6:case"end":return e.stop()}},e,this)})),function(e,t){return F.apply(this,arguments)})},{key:"_recoverAndRefresh",value:(q=(0,U.A)(y().mark(function e(){var t,r,n,a,s,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="#_recoverAndRefresh()",this._debug(r,"begin"),e.prev=2,e.next=5,eG(this.storage,this.storageKey);case 5:if(n=e.sent,this._debug(r,"session from storage",n),this._isValidSession(n)){e.next=13;break}if(this._debug(r,"session is not valid"),!(null!==n)){e.next=12;break}return e.next=12,this._removeSession();case 12:return e.abrupt("return");case 13:if(a=Math.round(Date.now()/1e3),s=(null!==(t=n.expires_at)&&void 0!==t?t:1/0)<a+10,this._debug(r,"session has".concat(s?"":" not"," expired with margin of ").concat(10,"s")),!s){e.next=30;break}if(!(this.autoRefreshToken&&n.refresh_token)){e.next=28;break}return e.next=20,this._callRefreshToken(n.refresh_token);case 20:if(!(i=e.sent.error)||(console.error(i),to(i))){e.next=28;break}return this._debug(r,"refresh failed with a non-retryable error, removing the session",i),e.next=28,this._removeSession();case 28:e.next=32;break;case 30:return e.next=32,this._notifyAllSubscribers("SIGNED_IN",n);case 32:e.next=39;break;case 34:return e.prev=34,e.t0=e.catch(2),this._debug(r,"error",e.t0),console.error(e.t0),e.abrupt("return");case 39:return e.prev=39,this._debug(r,"end"),e.finish(39);case 42:case"end":return e.stop()}},e,this,[[2,34,39,42]])})),function(){return q.apply(this,arguments)})},{key:"_callRefreshToken",value:(J=(0,U.A)(y().mark(function e(t){var r,n,a,s,i,o,u,c;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new tt;case 2:if(!this.refreshingDeferred){e.next=4;break}return e.abrupt("return",this.refreshingDeferred.promise);case 4:return a="#_callRefreshToken(".concat(t.substring(0,5),"...)"),this._debug(a,"begin"),e.prev=6,this.refreshingDeferred=new e$,e.next=10,this._refreshAccessToken(t);case 10:if(i=(s=e.sent).data,!(o=s.error)){e.next=15;break}throw o;case 15:if(i.session){e.next=17;break}throw new tt;case 17:return e.next=19,this._saveSession(i.session);case 19:return e.next=21,this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);case 21:return u={session:i.session,error:null},this.refreshingDeferred.resolve(u),e.abrupt("return",u);case 26:if(e.prev=26,e.t0=e.catch(6),this._debug(a,"error",e.t0),!e8(e.t0)){e.next=36;break}if(c={session:null,error:e.t0},to(e.t0)){e.next=34;break}return e.next=34,this._removeSession();case 34:return null===(r=this.refreshingDeferred)||void 0===r||r.resolve(c),e.abrupt("return",c);case 36:throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(e.t0),e.t0;case 38:return e.prev=38,this.refreshingDeferred=null,this._debug(a,"end"),e.finish(38);case 42:case"end":return e.stop()}},e,this,[[6,26,38,42]])})),function(e){return J.apply(this,arguments)})},{key:"_notifyAllSubscribers",value:(H=(0,U.A)(y().mark(function e(t,r){var n,a,s,i,o,u=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(u.length>2)||void 0===u[2]||u[2],a="#_notifyAllSubscribers(".concat(t,")"),this._debug(a,"begin",r,"broadcast = ".concat(n)),e.prev=3,this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r}),s=[],i=Array.from(this.stateChangeEmitters.values()).map(function(){var e=(0,U.A)(y().mark(function e(n){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.callback(t,r);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),s.push(e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()),e.next=9,Promise.all(i);case 9:if(!(s.length>0)){e.next=12;break}for(o=0;o<s.length;o+=1)console.error(s[o]);throw s[0];case 12:return e.prev=12,this._debug(a,"end"),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[3,,12,15]])})),function(e,t){return H.apply(this,arguments)})},{key:"_saveSession",value:(K=(0,U.A)(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,e.next=4,eW(this.storage,this.storageKey,t);case 4:case"end":return e.stop()}},e,this)})),function(e){return K.apply(this,arguments)})},{key:"_removeSession",value:(W=(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._debug("#_removeSession()"),e.next=3,eV(this.storage,this.storageKey);case 3:return e.next=5,this._notifyAllSubscribers("SIGNED_OUT",null);case 5:case"end":return e.stop()}},e,this)})),function(){return W.apply(this,arguments)})},{key:"_removeVisibilityChangedCallback",value:function(){this._debug("#_removeVisibilityChangedCallback()");var e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&eq()&&(null==window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}},{key:"_startAutoRefresh",value:(G=(0,U.A)(y().mark(function e(){var t,r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._stopAutoRefresh();case 2:this._debug("#_startAutoRefresh()"),t=setInterval(function(){return r._autoRefreshTokenTick()},3e4),this.autoRefreshTicker=t,t&&"object"==typeof t&&"function"==typeof t.unref?t.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(t),setTimeout((0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.initializePromise;case 2:return e.next=4,r._autoRefreshTokenTick();case 4:case"end":return e.stop()}},e)})),0);case 7:case"end":return e.stop()}},e,this)})),function(){return G.apply(this,arguments)})},{key:"_stopAutoRefresh",value:(V=(0,U.A)(y().mark(function e(){var t;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._debug("#_stopAutoRefresh()"),t=this.autoRefreshTicker,this.autoRefreshTicker=null,t&&clearInterval(t);case 4:case"end":return e.stop()}},e,this)})),function(){return V.apply(this,arguments)})},{key:"startAutoRefresh",value:($=(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._removeVisibilityChangedCallback(),e.next=3,this._startAutoRefresh();case 3:case"end":return e.stop()}},e,this)})),function(){return $.apply(this,arguments)})},{key:"stopAutoRefresh",value:(Y=(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._removeVisibilityChangedCallback(),e.next=3,this._stopAutoRefresh();case 3:case"end":return e.stop()}},e,this)})),function(){return Y.apply(this,arguments)})},{key:"_autoRefreshTokenTick",value:(Z=(0,U.A)(y().mark(function e(){var t=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._debug("#_autoRefreshTokenTick()","begin"),e.prev=1,e.next=4,this._acquireLock(0,(0,U.A)(y().mark(function e(){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Date.now(),e.prev=2,e.next=5,t._useSession(function(){var e=(0,U.A)(y().mark(function e(n){var a,s;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(a=n.data.session)||!a.refresh_token||!a.expires_at)){e.next=4;break}return t._debug("#_autoRefreshTokenTick()","no session"),e.abrupt("return");case 4:if(s=Math.floor((1e3*a.expires_at-r)/3e4),t._debug("#_autoRefreshTokenTick()","access token expires in ".concat(s," ticks, a tick lasts ").concat(3e4,"ms, refresh threshold is ").concat(3," ticks")),!(s<=3)){e.next=9;break}return e.next=9,t._callRefreshToken(a.refresh_token);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(2),console.error("Auto refresh tick failed with error. This is likely a transient error.",e.t0);case 11:return e.prev=11,t._debug("#_autoRefreshTokenTick()","end"),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[0,,11,14],[2,8]])})));case 4:e.next=13;break;case 6:if(e.prev=6,e.t0=e.catch(1),!(e.t0.isAcquireTimeout||e.t0 instanceof tC)){e.next=12;break}this._debug("auto refresh token tick lock not available"),e.next=13;break;case 12:throw e.t0;case 13:case"end":return e.stop()}},e,this,[[1,6]])})),function(){return Z.apply(this,arguments)})},{key:"_handleVisibilityChange",value:(Q=(0,U.A)(y().mark(function e(){var t=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._debug("#_handleVisibilityChange()"),!(!eq()||!(null==window?void 0:window.addEventListener))){e.next=4;break}return this.autoRefreshToken&&this.startAutoRefresh(),e.abrupt("return",!1);case 4:return e.prev=4,this.visibilityChangedCallback=(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._onVisibilityChanged(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),null==window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),e.next=9,this._onVisibilityChanged(!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("_handleVisibilityChange",e.t0);case 14:case"end":return e.stop()}},e,this,[[4,11]])})),function(){return Q.apply(this,arguments)})},{key:"_onVisibilityChanged",value:(ee=(0,U.A)(y().mark(function e(t){var r,n=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r="#_onVisibilityChanged(".concat(t,")"),this._debug(r,"visibilityState",document.visibilityState),"visible"!==document.visibilityState){e.next=11;break}if(this.autoRefreshToken&&this._startAutoRefresh(),t){e.next=9;break}return e.next=7,this.initializePromise;case 7:return e.next=9,this._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("visible"!==document.visibilityState)){e.next=3;break}return n._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"),e.abrupt("return");case 3:return e.next=5,n._recoverAndRefresh();case 5:case"end":return e.stop()}},e)})));case 9:e.next=12;break;case 11:"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh();case 12:case"end":return e.stop()}},e,this)})),function(e){return ee.apply(this,arguments)})},{key:"_getUrlForProvider",value:(et=(0,U.A)(y().mark(function e(t,r,n){var a,s,i,o,u,c,l;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=["provider=".concat(encodeURIComponent(r))],(null==n?void 0:n.redirectTo)&&a.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null==n?void 0:n.scopes)&&a.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"!==this.flowType){e.next=12;break}return e.next=6,e1(this.storage,this.storageKey);case 6:s=e.sent,o=(i=(0,el.A)(s,2))[0],u=i[1],c=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(o)),code_challenge_method:"".concat(encodeURIComponent(u))}),a.push(c.toString());case 12:return(null==n?void 0:n.queryParams)&&(l=new URLSearchParams(n.queryParams),a.push(l.toString())),(null==n?void 0:n.skipBrowserRedirect)&&a.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),e.abrupt("return","".concat(t,"?").concat(a.join("&")));case 15:case"end":return e.stop()}},e,this)})),function(e,t,r){return et.apply(this,arguments)})},{key:"_unenroll",value:(er=(0,U.A)(y().mark(function e(t){var r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._useSession(function(){var e=(0,U.A)(y().mark(function e(n){var a,s,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.data,!(i=n.error)){e.next=3;break}return e.abrupt("return",{data:null,error:i});case 3:return e.next=5,tv(r.fetch,"DELETE","".concat(r.url,"/factors/").concat(t.factorId),{headers:r.headers,jwt:null===(a=null==s?void 0:s.session)||void 0===a?void 0:a.access_token});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!e8(e.t0)){e.next=10;break}return e.abrupt("return",{data:null,error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return er.apply(this,arguments)})},{key:"_enroll",value:(en=(0,U.A)(y().mark(function e(t){var r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._useSession(function(){var e=(0,U.A)(y().mark(function e(n){var a,s,i,o,u,c,l,h;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.data,!(o=n.error)){e.next=3;break}return e.abrupt("return",{data:null,error:o});case 3:return u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},"phone"===t.factorType?{phone:t.phone}:{issuer:t.issuer}),e.next=6,tv(r.fetch,"POST","".concat(r.url,"/factors"),{body:u,headers:r.headers,jwt:null===(a=null==i?void 0:i.session)||void 0===a?void 0:a.access_token});case 6:if(l=(c=e.sent).data,!(h=c.error)){e.next=11;break}return e.abrupt("return",{data:null,error:h});case 11:return"totp"===t.factorType&&(null===(s=null==l?void 0:l.totp)||void 0===s?void 0:s.qr_code)&&(l.totp.qr_code="data:image/svg+xml;utf-8,".concat(l.totp.qr_code)),e.abrupt("return",{data:l,error:null});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!e8(e.t0)){e.next=10;break}return e.abrupt("return",{data:null,error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return en.apply(this,arguments)})},{key:"_verify",value:(ea=(0,U.A)(y().mark(function e(t){var r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r._useSession(function(){var e=(0,U.A)(y().mark(function e(n){var a,s,i,o,u,c;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.data,!(i=n.error)){e.next=3;break}return e.abrupt("return",{data:null,error:i});case 3:return e.next=5,tv(r.fetch,"POST","".concat(r.url,"/factors/").concat(t.factorId,"/verify"),{body:{code:t.code,challenge_id:t.challengeId},headers:r.headers,jwt:null===(a=null==s?void 0:s.session)||void 0===a?void 0:a.access_token});case 5:if(u=(o=e.sent).data,!(c=o.error)){e.next=10;break}return e.abrupt("return",{data:null,error:c});case 10:return e.next=12,r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u));case 12:return e.next=14,r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u);case 14:return e.abrupt("return",{data:u,error:c});case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!e8(e.t0)){e.next=10;break}return e.abrupt("return",{data:null,error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,null,[[0,6]])}))));case 1:case"end":return e.stop()}},e,this)})),function(e){return ea.apply(this,arguments)})},{key:"_challenge",value:(es=(0,U.A)(y().mark(function e(t){var r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r._useSession(function(){var e=(0,U.A)(y().mark(function e(n){var a,s,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.data,!(i=n.error)){e.next=3;break}return e.abrupt("return",{data:null,error:i});case 3:return e.next=5,tv(r.fetch,"POST","".concat(r.url,"/factors/").concat(t.factorId,"/challenge"),{body:{channel:t.channel},headers:r.headers,jwt:null===(a=null==s?void 0:s.session)||void 0===a?void 0:a.access_token});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!e8(e.t0)){e.next=10;break}return e.abrupt("return",{data:null,error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,null,[[0,6]])}))));case 1:case"end":return e.stop()}},e,this)})),function(e){return es.apply(this,arguments)})},{key:"_challengeAndVerify",value:(ei=(0,U.A)(y().mark(function e(t){var r,n,a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._challenge({factorId:t.factorId});case 2:if(n=(r=e.sent).data,!(a=r.error)){e.next=7;break}return e.abrupt("return",{data:null,error:a});case 7:return e.next=9,this._verify({factorId:t.factorId,challengeId:n.id,code:t.code});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)})),function(e){return ei.apply(this,arguments)})},{key:"_listFactors",value:(eo=(0,U.A)(y().mark(function e(){var t,r,n,a,s,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:if(r=(t=e.sent).data.user,!(n=t.error)){e.next=7;break}return e.abrupt("return",{data:null,error:n});case 7:return s=(a=(null==r?void 0:r.factors)||[]).filter(function(e){return"totp"===e.factor_type&&"verified"===e.status}),i=a.filter(function(e){return"phone"===e.factor_type&&"verified"===e.status}),e.abrupt("return",{data:{all:a,totp:s,phone:i},error:null});case 11:case"end":return e.stop()}},e,this)})),function(){return eo.apply(this,arguments)})},{key:"_getAuthenticatorAssuranceLevel",value:(eu=(0,U.A)(y().mark(function e(){var t=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._acquireLock(-1,(0,U.A)(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._useSession(function(){var e=(0,U.A)(y().mark(function e(r){var n,a,s,i,o,u,c,l;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.data.session,!(i=r.error)){e.next=3;break}return e.abrupt("return",{data:null,error:i});case 3:if(s){e.next=5;break}return e.abrupt("return",{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null});case 5:return o=t._decodeJWT(s.access_token),u=null,o.aal&&(u=o.aal),c=u,(null!==(a=null===(n=s.user.factors)||void 0===n?void 0:n.filter(function(e){return"verified"===e.status}))&&void 0!==a?a:[]).length>0&&(c="aal2"),l=o.amr||[],e.abrupt("return",{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:l},error:null});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))));case 1:case"end":return e.stop()}},e,this)})),function(){return eu.apply(this,arguments)})}]),ec}();function tM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tM=function(){return!!e})()}tB.nextInstanceID=0;var tz=function(e){(0,m.A)(n,e);var t,r=(t=tM(),function(){var e,r=(0,w.A)(n);return e=t?Reflect.construct(r,arguments,(0,w.A)(this).constructor):r.apply(this,arguments),(0,k.A)(this,e)});function n(e){return(0,d.A)(this,n),r.call(this,e)}return(0,v.A)(n)}(tB),tF=function(){function e(t,r,n){if((0,d.A)(this,e),this.supabaseUrl=t,this.supabaseKey=r,!t)throw Error("supabaseUrl is required.");if(!r)throw Error("supabaseKey is required.");var a,s,i,o=t.replace(/\/$/,"");this.realtimeUrl="".concat(o,"/realtime/v1").replace(/^http/i,"ws"),this.authUrl="".concat(o,"/auth/v1"),this.storageUrl="".concat(o,"/storage/v1"),this.functionsUrl="".concat(o,"/functions/v1");var u="sb-".concat(new URL(this.authUrl).hostname.split(".")[0],"-auth-token"),c=function(e,t){var r=this,n=e.db,a=e.auth,s=e.realtime,i=e.global,o=t.db,u=t.auth,c=t.realtime,l=t.global,h={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},l),i),accessToken:function(){var e,t,n;return e=void 0,t=void 0,n=y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","");case 1:case"end":return e.stop()}},e)}),new(t||(t=Promise))(function(a,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var r;e.done?a(e.value):((r=e.value)instanceof t?r:new t(function(e){e(r)})).then(i,o)}u((n=n.apply(r,e||[])).next())})}};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=n?n:{},{db:eI,realtime:eL,auth:Object.assign(Object.assign({},eN),{storageKey:u}),global:eR});this.storageKey=null!==(a=c.auth.storageKey)&&void 0!==a?a:"",this.headers=null!==(s=c.global.headers)&&void 0!==s?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:function(e,t){throw Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(i=c.auth)&&void 0!==i?i:{},this.headers,c.global.fetch),this.fetch=eB(r,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new P("".concat(o,"/rest/v1"),{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}return(0,v.A)(e,[{key:"functions",get:function(){return new j(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}},{key:"storage",get:function(){return new eP(this.storageUrl,this.headers,this.fetch)}},{key:"from",value:function(e){return this.rest.from(e)}},{key:"schema",value:function(e){return this.rest.schema(e)}},{key:"rpc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,r)}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}},{key:"getChannels",value:function(){return this.realtime.getChannels()}},{key:"removeChannel",value:function(e){return this.realtime.removeChannel(e)}},{key:"removeAllChannels",value:function(){return this.realtime.removeAllChannels()}},{key:"_getAccessToken",value:function(){var e,t,r,n,a,s;return r=this,n=void 0,a=void 0,s=y().mark(function r(){var n;return y().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.accessToken){r.next=4;break}return r.next=3,this.accessToken();case 3:return r.abrupt("return",r.sent);case 4:return r.next=6,this.auth.getSession();case 6:return n=r.sent.data,r.abrupt("return",null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null);case 9:case"end":return r.stop()}},r,this)}),new(a||(a=Promise))(function(e,t){function i(e){try{u(s.next(e))}catch(e){t(e)}}function o(e){try{u(s.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):((r=t.value)instanceof a?r:new a(function(e){e(r)})).then(i,o)}u((s=s.apply(r,n||[])).next())})}},{key:"_initSupabaseAuthClient",value:function(e,t,r){var n=e.autoRefreshToken,a=e.persistSession,s=e.detectSessionInUrl,i=e.storage,o=e.storageKey,u=e.flowType,c=e.lock,l=e.debug,h={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new tz({url:this.authUrl,headers:Object.assign(Object.assign({},h),t),storageKey:o,autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:i,flowType:u,lock:c,debug:l,fetch:r,hasCustomAuthorizationHeader:"Authorization"in this.headers})}},{key:"_initRealtimeClient",value:function(e){return new er(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}},{key:"_listenForAuthEvents",value:function(){var e=this;return this.auth.onAuthStateChange(function(t,r){e._handleTokenChanged(t,"CLIENT",null==r?void 0:r.access_token)})}},{key:"_handleTokenChanged",value:function(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?this.changedAccessToken=r:"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}}]),e}(),tq=function(e,t,r){return new tF(e,t,r)}},1987:e=>{!function(){var t={675:function(e,t){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,s=u(e),i=s[0],o=s[1],c=new a((i+o)*3/4-o),l=0,h=o>0?i-4:i;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t),1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,s=[],i=0,o=n-a;i<o;i+=16383)s.push(function(e,t,n){for(var a,s=[],i=t;i<n;i+=3)s.push(r[(a=(e[i]<<16&0xff0000)+(e[i+1]<<8&65280)+(255&e[i+2]))>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return s.join("")}(e,i,i+16383>o?o:i+16383));return 1===a?s.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===a&&s.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],n=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=s.length;i<o;++i)r[i]=s[i],n[s.charCodeAt(i)]=i;function u(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},72:function(e,t,r){"use strict";var n=r(675),a=r(783),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function i(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return l(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw TypeError("Unknown encoding: "+t);var r=0|p(e,t),n=i(r),a=n.write(e,t);return a!==r&&(n=n.slice(0,a)),n}(e,t);if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return function(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),n}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);var a=function(e){if(o.isBuffer(e)){var t,r=0|f(e.length),n=i(r);return 0===n.length||e.copy(n,0,0,r),n}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?i(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return c(e),i(e<0?0:0|f(e))}function h(e){for(var t=e.length<0?0:0|f(e.length),r=i(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return E(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return O(e).length;default:if(a)return n?-1:E(e).length;t=(""+t).toLowerCase(),a=!0}}function d(e,t,r){var a,s,i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",s=t;s<r;++s)a+=P[e[s]];return a}(this,t,r);case"utf8":case"utf-8":return g(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}(this,t,r);case"base64":return a=t,s=r,0===a&&s===this.length?n.fromByteArray(this):n.fromByteArray(this.slice(a,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),a="",s=0;s<n.length;s+=2)a+=String.fromCharCode(n[s]+256*n[s+1]);return a}(this,t,r);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,a){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(s=r=+r)!=s&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return -1;r=e.length-1}else if(r<0){if(!a)return -1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,a);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,a);throw TypeError("val must be string, number or Buffer")}function y(e,t,r,n,a){var s,i=1,o=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;i=2,o/=2,u/=2,r/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a){var l=-1;for(s=r;s<o;s++)if(c(e,s)===c(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*i}else -1!==l&&(s-=s-l),l=-1}else for(r+u>o&&(r=o-u),s=r;s>=0;s--){for(var h=!0,f=0;f<u;f++)if(c(e,s+f)!==c(t,f)){h=!1;break}if(h)return s}return -1}function g(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var s,i,o,u,c=e[a],l=null,h=c>239?4:c>223?3:c>191?2:1;if(a+h<=r)switch(h){case 1:c<128&&(l=c);break;case 2:(192&(s=e[a+1]))==128&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:s=e[a+1],i=e[a+2],(192&s)==128&&(192&i)==128&&(u=(15&c)<<12|(63&s)<<6|63&i)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[a+1],i=e[a+2],o=e[a+3],(192&s)==128&&(192&i)==128&&(192&o)==128&&(u=(15&c)<<18|(63&s)<<12|(63&i)<<6|63&o)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),a+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function m(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function k(e,t,r,n,a,s){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function w(e,t,r,n,a,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function x(e,t,r,n,s){return t=+t,r>>>=0,s||w(e,t,r,4,34028234663852886e22,-34028234663852886e22),a.write(e,t,r,n,23,4),r+4}function _(e,t,r,n,s){return t=+t,r>>>=0,s||w(e,t,r,8,17976931348623157e292,-17976931348623157e292),a.write(e,t,r,n,52,8),r+8}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(c(e),e<=0)?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)},o.allocUnsafe=function(e){return l(e)},o.allocUnsafeSlow=function(e){return l(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(j(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,a=0,s=Math.min(r,n);a<s;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=o.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var s=e[r];if(j(s,Uint8Array)&&(s=o.from(s)),!o.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(n,a),a+=s.length}return n},o.byteLength=p,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?g(this,0,e):d.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,a){if(j(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,a>>>=0,this===e)return 0;for(var s=a-n,i=r-t,u=Math.min(s,i),c=this.slice(n,a),l=e.slice(t,r),h=0;h<u;++h)if(c[h]!==l[h]){s=c[h],i=l[h];break}return s<i?-1:i<s?1:0},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a,s,i,o,u,c,l,h,f,p,d,v,b=this.length-t;if((void 0===r||r>b)&&(r=b),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var y=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var s=t.length;n>s/2&&(n=s/2);for(var i=0;i<n;++i){var o=parseInt(t.substr(2*i,2),16);if(o!=o)break;e[r+i]=o}return i}(this,e,t,r);case"utf8":case"utf-8":return u=t,c=r,T(E(e,this.length-u),this,u,c);case"ascii":return l=t,h=r,T(S(e),this,l,h);case"latin1":case"binary":;return a=this,s=e,i=t,o=r,T(S(s),a,i,o);case"base64":return f=t,p=r,T(O(e),this,f,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d=t,v=r,T(function(e,t){for(var r,n,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,a.push(r%256),a.push(n);return a}(e,this.length-d),this,d,v);default:if(y)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),y=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var n=this[e],a=1,s=0;++s<t&&(a*=256);)n+=this[e+s]*a;return n},o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},o.prototype.readUInt8=function(e,t){return e>>>=0,t||m(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||m(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||m(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||m(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||m(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var n=this[e],a=1,s=0;++s<t&&(a*=256);)n+=this[e+s]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||m(e,t,this.length);for(var n=t,a=1,s=this[e+--n];n>0&&(a*=256);)s+=this[e+--n]*a;return s>=(a*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readInt8=function(e,t){return(e>>>=0,t||m(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||m(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||m(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||m(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||m(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||m(e,4,this.length),a.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||m(e,4,this.length),a.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||m(e,8,this.length),a.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||m(e,8,this.length),a.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var a=Math.pow(2,8*r)-1;k(this,e,t,r,a,0)}var s=1,i=0;for(this[t]=255&e;++i<r&&(s*=256);)this[t+i]=e/s&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var a=Math.pow(2,8*r)-1;k(this,e,t,r,a,0)}var s=r-1,i=1;for(this[t+s]=255&e;--s>=0&&(i*=256);)this[t+s]=e/i&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var a=Math.pow(2,8*r-1);k(this,e,t,r,a-1,-a)}var s=0,i=1,o=0;for(this[t]=255&e;++s<r&&(i*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/i>>0)-o&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var a=Math.pow(2,8*r-1);k(this,e,t,r,a-1,-a)}var s=r-1,i=1,o=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/i>>0)-o&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return _(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return _(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var s=a-1;s>=0;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return a},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var a,s=e.charCodeAt(0);("utf8"===n&&s<128||"latin1"===n)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var i=o.isBuffer(e)?e:o.from(e,n),u=i.length;if(0===u)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=i[a%u]}return this};var A=/[^+/0-9A-Za-z-_]/g;function E(e,t){t=t||1/0;for(var r,n=e.length,a=null,s=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!a){if(r>56319||i+1===n){(t-=3)>-1&&s.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),a=r;continue}r=(a-55296<<10|r-56320)+65536}else a&&(t-=3)>-1&&s.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function S(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function O(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(A,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function T(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length)&&!(a>=e.length);++a)t[a+r]=e[a];return a}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var P=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,a=0;a<16;++a)t[n+a]=e[r]+e[a];return t}()},783:function(e,t){t.read=function(e,t,r,n,a){var s,i,o=8*a-n-1,u=(1<<o)-1,c=u>>1,l=-7,h=r?a-1:0,f=r?-1:1,p=e[t+h];for(h+=f,s=p&(1<<-l)-1,p>>=-l,l+=o;l>0;s=256*s+e[t+h],h+=f,l-=8);for(i=s&(1<<-l)-1,s>>=-l,l+=n;l>0;i=256*i+e[t+h],h+=f,l-=8);if(0===s)s=1-c;else{if(s===u)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,n),s-=c}return(p?-1:1)*i*Math.pow(2,s-n)},t.write=function(e,t,r,n,a,s){var i,o,u,c=8*s-a-1,l=(1<<c)-1,h=l>>1,f=23===a?5960464477539062e-23:0,p=n?0:s-1,d=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(o=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-i))<1&&(i--,u*=2),i+h>=1?t+=f/u:t+=f*Math.pow(2,1-h),t*u>=2&&(i++,u/=2),i+h>=l?(o=0,i=l):i+h>=1?(o=(t*u-1)*Math.pow(2,a),i+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,a),i=0));a>=8;e[r+p]=255&o,p+=d,o/=256,a-=8);for(i=i<<a|o,c+=a;c>0;e[r+p]=255&i,p+=d,i/=256,c-=8);e[r+p-d]|=128*v}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var s=r[e]={exports:{}},i=!0;try{t[e](s,s.exports,n),i=!1}finally{i&&delete r[e]}return s.exports}n.ab="//";var a=n(72);e.exports=a}()},269:(e,t,r)=>{e.exports=r(2326)},6392:(e,t,r)=>{e.exports=r(1599)},8424:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(5580)}])},7689:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(615),a=r(6431),s=r(2963),i=r(7851),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},u=["color","size","strokeWidth","absoluteStrokeWidth","className","children"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=function(e,t){var r=(0,i.forwardRef)(function(r,s){var c=r.color,h=r.size,f=void 0===h?24:h,p=r.strokeWidth,d=void 0===p?2:p,v=r.absoluteStrokeWidth,b=r.className,y=r.children,g=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(r,u);return(0,i.createElement)("svg",l(l({ref:s},o),{},{width:f,height:f,stroke:void 0===c?"currentColor":c,strokeWidth:v?24*Number(d)/Number(f):d,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),void 0===b?"":b].join(" ")},g),[].concat((0,a.A)(t.map(function(e){var t=(0,n.A)(e,2),r=t[0],a=t[1];return(0,i.createElement)(r,a)})),(0,a.A)(Array.isArray(y)?y:[y])))});return r.displayName="".concat(e),r}},5729:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var n=(0,r(7689).A)("Wine",[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]])},160:(e,t,r)=>{"use strict";function n(e,t,r,n){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return n}}),r(5836),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2326:(e,t,r)=>{"use strict";var n=r(8881),a=r(4503),s=r(2819),i=["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter","onTouchStart","legacyBehavior"];function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return E}});var c=r(5068),l=r(1451),h=c._(r(7851)),f=r(5800),p=r(1876),d=r(5853),v=r(2731),b=r(2674),y=r(4329),g=r(1733),m=r(160),k=r(2673),w=r(4832),x=new Set;function _(e,t,r,n){if((0,p.isLocalURL)(t)){if(!n.bypassPrefetchedCheck){var a=t+"%"+r+"%"+(void 0!==n.locale?n.locale:"locale"in e?e.locale:void 0);if(x.has(a))return;x.add(a)}e.prefetch(t,r,n).catch(function(e){})}}function A(e){return"string"==typeof e?e:(0,d.formatUrl)(e)}var E=h.default.forwardRef(function(e,t){var r,n,o=e.href,c=e.as,d=e.children,x=e.prefetch,E=e.passHref,S=e.replace,O=e.shallow,T=e.scroll,j=e.locale,P=e.onClick,C=e.onMouseEnter,R=e.onTouchStart,I=e.legacyBehavior,N=void 0!==I&&I,L=s(e,i);r=d,N&&("string"==typeof r||"number"==typeof r)&&(r=(0,l.jsx)("a",{children:r}));var U=h.default.useContext(y.RouterContext),D=!1!==(void 0===x?null:x),B=h.default.useMemo(function(){if(!U){var e=A(o);return{href:e,as:c?A(c):e}}var t=a((0,f.resolveHref)(U,o,!0),2),r=t[0],n=t[1];return{href:r,as:c?(0,f.resolveHref)(U,c):n||r}},[U,o,c]),M=B.href,z=B.as,F=h.default.useRef(M),q=h.default.useRef(z);N&&(n=h.default.Children.only(r));var J=N?n&&"object"==typeof n&&n.ref:t,H=a((0,g.useIntersection)({rootMargin:"200px"}),3),K=H[0],W=H[1],G=H[2],V=h.default.useCallback(function(e){(q.current!==z||F.current!==M)&&(G(),q.current=z,F.current=M),K(e)},[z,M,G,K]),$=(0,w.useMergedRef)(V,J);h.default.useEffect(function(){U&&W&&D&&_(U,M,z,{locale:j})},[z,M,W,j,D,null==U?void 0:U.locale,U]);var Y={ref:$,onClick:function(e){var t,r,a,s,i,o,u,c,l,h;N||"function"!=typeof P||P(e),N&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),!U||e.defaultPrevented||(t=e,r=U,a=M,s=z,i=S,o=O,u=T,c=j,"A"===t.currentTarget.nodeName.toUpperCase()&&((l=t.currentTarget.getAttribute("target"))&&"_self"!==l||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which||!(0,p.isLocalURL)(a))||(t.preventDefault(),h=null==u||u,"beforePopState"in r?r[i?"replace":"push"](a,s,{shallow:o,locale:c,scroll:h}):r[i?"replace":"push"](s||a,{scroll:h})))},onMouseEnter:function(e){N||"function"!=typeof C||C(e),N&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),U&&_(U,M,z,{locale:j,priority:!0,bypassPrefetchedCheck:!0})},onTouchStart:function(e){N||"function"!=typeof R||R(e),N&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),U&&_(U,M,z,{locale:j,priority:!0,bypassPrefetchedCheck:!0})}};if((0,v.isAbsoluteUrl)(z))Y.href=z;else if(!N||E||"a"===n.type&&!("href"in n.props)){var X=void 0!==j?j:null==U?void 0:U.locale,Z=(null==U?void 0:U.isLocaleDomain)&&(0,m.getDomainLocale)(z,X,null==U?void 0:U.locales,null==U?void 0:U.domainLocales);Y.href=Z||(0,k.addBasePath)((0,b.addLocale)(z,X,null==U?void 0:U.defaultLocale))}return N?h.default.cloneElement(n,Y):(0,l.jsx)("a",u(u(u({},L),Y),{},{children:r}))});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1733:(e,t,r)=>{"use strict";var n=r(4503);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return c}});var a=r(7851),s=r(5578),i="function"==typeof IntersectionObserver,o=new Map,u=[];function c(e){var t=e.rootRef,r=e.rootMargin,c=e.disabled||!i,l=n((0,a.useState)(!1),2),h=l[0],f=l[1],p=(0,a.useRef)(null),d=(0,a.useCallback)(function(e){p.current=e},[]);return(0,a.useEffect)(function(){if(i){if(!c&&!h){var e,n,a,l,d,v=p.current;if(v&&v.tagName)return e=function(e){return e&&f(e)},a=(n=function(e){var t,r={root:e.root||null,margin:e.rootMargin||""},n=u.find(function(e){return e.root===r.root&&e.margin===r.margin});if(n&&(t=o.get(n)))return t;var a=new Map;return t={id:r,observer:new IntersectionObserver(function(e){e.forEach(function(e){var t=a.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e),elements:a},u.push(r),o.set(r,t),t}({root:null==t?void 0:t.current,rootMargin:r})).id,l=n.observer,(d=n.elements).set(v,e),l.observe(v),function(){if(d.delete(v),l.unobserve(v),0===d.size){l.disconnect(),o.delete(a);var e=u.findIndex(function(e){return e.root===a.root&&e.margin===a.margin});e>-1&&u.splice(e,1)}}}}else if(!h){var b=(0,s.requestIdleCallback)(function(){return f(!0)});return function(){return(0,s.cancelIdleCallback)(b)}}},[c,r,t,h,p.current]),[d,h,(0,a.useCallback)(function(){f(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});var n=r(7851);function a(e,t){var r=(0,n.useRef)(function(){}),a=(0,n.useRef)(function(){});return(0,n.useMemo)(function(){return e&&t?function(n){null===n?(r.current(),a.current()):(r.current=s(e,n),a.current=s(t,n))}:e||t},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,function(){e.current=null};var r=e(t);return"function"==typeof r?r:function(){return e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6666:(e,t,r)=>{"use strict";r.d(t,{A:()=>h,O:()=>l});var n=r(5507),a=r(3003),s=r.n(a),i=r(7851),o=r(5041),u=i.createElement,c=(0,i.createContext)({user:null,profile:null,loading:!0,signOut:function(){var e=(0,n.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),setUser:function(){}}),l=function(e){var t,r,a,l=e.children,h=(0,i.useState)(null),f=h[0],p=h[1],d=(0,i.useState)(null),v=d[0],b=d[1],y=(0,i.useState)(!0),g=y[0],m=y[1],k=(t=(0,n.A)(s().mark(function e(t){var r,n,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.N.from("profiles").select("*").eq("id",t).single();case 3:if(n=(r=e.sent).data,!(a=r.error)){e.next=9;break}return console.error("Error fetching profile:",a.message),e.abrupt("return");case 9:n&&b(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error:",e.t0.message);case 15:case"end":return e.stop()}},e,null,[[0,12]])})),function(e){return t.apply(this,arguments)});(0,i.useEffect)(function(){o.N.auth.getSession().then(function(e){var t,r=e.data.session;p(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),null!=r&&r.user&&(k(r.user.id),x()),m(!1)});var e=o.N.auth.onAuthStateChange(function(e,t){var r;p(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),null!=t&&t.user?(k(t.user.id),x()):b(null)}).data.subscription;return function(){return e.unsubscribe()}},[]),(0,i.useEffect)(function(){f&&x()},[f]);var w=(0,i.useCallback)(function(){clearTimeout(a),x()},[]),x=function(){clearTimeout(a),a=setTimeout(function(){_()},72e5),window.addEventListener("mousemove",w),window.addEventListener("keypress",w),window.addEventListener("click",w)},_=(r=(0,n.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.N.auth.signOut();case 2:p(null),b(null),window.removeEventListener("mousemove",w),window.removeEventListener("keypress",w),window.removeEventListener("click",w);case 7:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)});return u(c.Provider,{value:{user:f,profile:v,loading:g,signOut:_,setUser:p}},l)},h=function(){return(0,i.useContext)(c)}},5041:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var n=r(4506),a="https://jwvjlyzxrsjjgowtbvqo.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp3dmpseXp4cnNqamdvd3RidnFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzgzMjY3NDMsImV4cCI6MjA1MzkwMjc0M30.QjVNPqV-mZkeQXqYx7Bj5fNtTP0iHjNyov5W-eCGJhY";if(!a||!s)throw Error("Missing Supabase URL or Key");var i=(0,n.UU)(a,s)},5580:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var n=r(7851),a=r(9269),s=r(5507),i=r(3003),o=r.n(i),u=r(269),c=r.n(u),l=r(6392),h=r(7037),f=r(5729),p=r(7689),d=(0,p.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),v=(0,p.A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),b=r(6666),y=n.createElement;let g=function(){var e,t=(0,b.A)(),r=t.user,a=t.profile,i=t.signOut,u=(0,l.useRouter)(),p=(0,n.useState)(!1),g=p[0],m=p[1],k=(0,n.useState)(!1),w=k[0],x=k[1],_=(0,n.useState)(""),A=_[0],E=_[1];(0,n.useEffect)(function(){null!=a&&a.username?E(a.username):null!=r&&r.email?E(r.email.split("@")[0]):E("User")},[r,a]);var S=(e=(0,s.A)(o().mark(function e(){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i();case 3:u.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error signing out:",e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])})),function(){return e.apply(this,arguments)}),O=function(){m(!g)},T=function(){x(!w)};return y("header",{className:"shadow-sm z-50"},y("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},y("div",{className:"flex justify-between h-16 items-center"},y(c(),{href:"/"},y("div",{className:"flex items-center space-x-2 cursor-pointer"},y(f.A,{className:"h-8 w-8 text-[#654a4e]"}),y("span",{className:"text-xl font-bold text-white"},"Delhi Escort"))),y("nav",{className:"hidden md:flex items-center space-x-4"},r?y(function(){return y(n.Fragment,null,y(c(),{href:"/create-listing"},y("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"},"Post Listing")),y("div",{className:"relative"},y("button",{onClick:T,className:"text-gray-700 hover:text-indigo-600 flex items-center space-x-1"},y(h.NBi,{className:"h-8 w-8 text-white"}),y("span",{className:"ml-2 font-bold text-white uppercase"},A)),w&&y("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-2 z-20"},y("span",{className:"block px-4 py-2 text-sm text-black hover:bg-black-100 border-b border-gray-100 uppercase font-bold"},A),y(c(),{href:"/dashboard"},y("button",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:function(){return x(!1)}},"Dashboard")),y("button",{onClick:function(){S(),x(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},"Sign Out"))))},null):y(function(){return y(n.Fragment,null,y(c(),{href:"/login"},y("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"},"Login")))},null)),y("div",{className:"md:hidden flex items-center"},y("button",{onClick:O,className:"text-white font-bold hover:text-indigo-600","aria-label":g?"Close menu":"Open menu"},g?y(d,{className:"h-6 w-6"}):y(v,{className:"h-6 w-6"}))))),y("div",{className:"md:hidden fixed inset-0 bg-[#000000b3] backdrop-blur-xl z-40 transition-transform transform ".concat(g?"translate-x-0":"-translate-x-full")},y("div",{className:"flex justify-end p-4 bg-[#000000b3] backdrop-blur-xl"},y("button",{onClick:O,className:"text-gray-700 hover:text-indigo-600"},y(d,{className:"h-6 w-6 text-white"}))),y("nav",{className:"flex flex-col items-center space-y-4 py-0 pb-10 bg-black backdrop-blur-xl"},r?y(n.Fragment,null,y(c(),{href:"/create-listing"},y("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 w-full text-center mx-4",onClick:function(){return m(!1)}},"Post Listing")),y("button",{onClick:T,className:"text-gray-700 hover:text-indigo-600 flex items-center space-x-1"},y(h.NBi,{className:"h-10 w-8 text-white"}),y("span",{className:"ml-4 text-white uppercase"},A),y(h.BNo,{className:"ml-1 h-4 w-4 text-black"})),w&&y("div",{className:"w-full px-4 bg-[#000000db]"},y("span",{className:"block px-4 py-2 text-m text-white border-b border-gray-100 uppercase"},A),y(c(),{href:"/dashboard"},y("button",{className:"block px-4 py-2 text-l text-white hover:bg-gray-100",onClick:function(){x(!1),m(!1)}},"Dashboard")),y("button",{onClick:function(){S(),x(!1),m(!1)},className:"block w-full text-left px-4 py-2 text-l text-white hover:bg-gray-100"},"Sign Out"))):y("div",{className:"w-full mt-0 px-20 py-10 pt-10 space-y-4 bg-[#000000b3] backdrop-blur-xl"},y(c(),{href:"/login"},y("button",{className:"block w-full text-center bg-indigo-600 text-white hover:text-indigo-600 py-2 rounded-md",onClick:function(){return m(!1)}},"Login"))))))};var m=(0,p.A)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),k=(0,p.A)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),w=(0,p.A)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),x=(0,p.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),_=n.createElement;let A=function(){return _("footer",{className:"bg-gray-900 text-gray-300 p-8"},_("div",{className:"container mx-auto"},_("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8"},_("div",{className:"space-y-4"},_("h3",{className:"text-white font-bold text-lg"},"About Dehi escort"),_("p",{className:"text-sm"},"Delhi Escort is the first choice for those passionate about premium escort services. We provide professional, authentic, and unforgettable experiences tailored to your desires."),_("p",{className:"text-sm"},"Whether you're looking for hot, gorgeous, sophisticated, or glamorous escorts in Dubai, Dehi escort is your ultimate destination.")),_("div",{className:"space-y-4"},_("h3",{className:"text-white font-bold text-lg"},"Our Services"),_("ul",{className:"space-y-2 text-sm"},_("li",null," Sophisticated Model Escort Service"),_("li",null," All Country Escorts in One Place"),_("li",null," 24/7 Availability for Escorts"),_("li",null," VIP and Elite Escort Packages"),_("li",null," Partner for All Types of Evenings"),_("li",null," Adequate Customer Care Service"))),_("div",{className:"space-y-4"},_("h3",{className:"text-white font-bold text-lg"},"Safety & Hygiene"),_("ul",{className:"space-y-2 text-sm"},_("li",null,"\uD83D\uDD12 Regular Health Checkups for Escorts"),_("li",null,"\uD83E\uDDFC Full Care of Sanitization and Hygiene"),_("li",null,"\uD83E\uDD10 Confidentiality in Health Information"),_("li",null,"\uD83D\uDC86 Comfort and Well-being of Clients"),_("li",null,"\uD83E\uDE7A Precautionary Measures for Safe Enjoyment"))),_("div",{className:"space-y-4"},_("h3",{className:"text-white font-bold text-lg"},"Special Packages"),_("ul",{className:"space-y-2 text-sm"},_("li",null,"\uD83D\uDC86 Body to Body Massage"),_("li",null,"\uD83C\uDFAD Exhilarating Role-Playing Sessions"),_("li",null,"\uD83C\uDF0D Themed Adventures"),_("li",null,"\uD83D\uDEC1 Aromatherapy & Spa Treatments"),_("li",null,"\uD83D\uDD25 Sensual & Erotic Massages")),_("div",{className:"mt-6"},_("h3",{className:"text-white font-bold text-lg"},"Follow Us"),_("div",{className:"flex gap-4 mt-2"},_("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"bg-pink-600 p-2 rounded-full hover:bg-pink-700 transition-colors duration-200","aria-label":"Facebook"},_(m,{size:20,className:"text-white"})),_("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"bg-pink-600 p-2 rounded-full hover:bg-pink-700 transition-colors duration-200","aria-label":"Instagram"},_(k,{size:20,className:"text-white"})),_("a",{href:"#",className:"bg-pink-600 p-2 rounded-full hover:bg-pink-700 transition-colors duration-200","aria-label":"Ban"},_(w,{size:20,className:"text-white"})),_("a",{href:"#",className:"bg-pink-600 p-2 rounded-full hover:bg-pink-700 transition-colors duration-200","aria-label":"Users"},_(x,{size:20,className:"text-white"})))))),_("div",{className:"mt-8 pt-6 border-t border-gray-800 text-center"},_("p",{className:"text-sm text-gray-400"},"\xa9 ",new Date().getFullYear()," Delhi-escort.com All rights reserved. |",_("a",{href:"/terms",className:"hover:text-white ml-2"},"Terms of Use")," |",_("a",{href:"/privacy",className:"hover:text-white ml-2"},"Privacy Policy")))))};r(4497);var E=n.createElement;let S=function(){var e,t=(0,n.useState)(""),r=t[0],a=t[1],i=(0,n.useState)(!1),u=i[0],c=i[1],l=(0,n.useState)(""),h=l[0],f=l[1],p=(e=(0,s.A)(o().mark(function e(t){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r){e.next=4;break}return f("Please enter your email address"),e.abrupt("return");case 4:return c(!0),e.prev=5,e.next=8,new Promise(function(e){return setTimeout(e,500)});case 8:f("Thank you for subscribing!"),a(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),f("Something went wrong. Please try again.");case 15:return e.prev=15,c(!1),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[5,12,15,18]])})),function(t){return e.apply(this,arguments)});return E("div",{className:"w-full bg-purple-900 py-4 px-4 sm:px-6 md:px-8"},E("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row md:items-center justify-between"},E("div",{className:"text-white text-lg md:mr-4"},"Want to receive unblocked domains and the latest listings? Subscribe to our newsletter!"),E("div",{className:"mt-3 md:mt-0 flex-shrink-0"},E("form",{onSubmit:p,className:"flex"},E("input",{type:"email",placeholder:"Email address",className:"px-4 py-2 w-full md:w-64 focus:outline-none",value:r,onChange:function(e){return a(e.target.value)},"aria-label":"Email address"}),E("button",{type:"submit",className:"bg-pink-600 hover:bg-pink-700 text-white font-medium px-4 py-2 transition-colors",disabled:u},u?"Signing up...":"Sign up!")),h&&E("p",{className:"mt-1 text-sm text-white"},h))))};var O=n.createElement;let T=function(e){var t=e.Component,r=e.pageProps;return O(b.O,null,O("div",{className:"min-h-screen flex flex-col main-content"},O(g,null),O("main",{className:"flex-grow"},O(t,r)),O(S,null),O(A,null),O(a.l$,{position:"top-right"})))}},4497:()=>{},1833:(e,t,r)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{A:()=>n})},5507:(e,t,r)=>{"use strict";function n(e,t,r,n,a,s,i){try{var o=e[s](i),u=o.value}catch(e){r(e);return}o.done?t(u):Promise.resolve(u).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise(function(a,s){var i=e.apply(t,r);function o(e){n(i,a,s,o,u,"next",e)}function u(e){n(i,a,s,o,u,"throw",e)}o(void 0)})}}r.d(t,{A:()=>a})},1525:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}r.d(t,{A:()=>n})},4117:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(694);function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(0,n.A)(a.key),a)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}},2963:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(694);function a(e,t,r){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},2450:(e,t,r)=>{"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,{A:()=>n})},1597:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(2158);function a(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,n.A)(e,t)}},7128:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(2876);function a(e,t){if(t&&("object"===(0,n.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}},2158:(e,t,r)=>{"use strict";function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.d(t,{A:()=>n})},615:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(6664);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],u=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||(0,n.A)(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},6431:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(1833),a=r(6664);function s(e){return function(e){if(Array.isArray(e))return(0,n.A)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.A)(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},694:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(2876);function a(e){var t=function(e,t){if("object"!==(0,n.A)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==(0,n.A)(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,n.A)(t)?t:String(t)}},2876:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{A:()=>n})},6664:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(1833);function a(e,t){if(e){if("string"==typeof e)return(0,n.A)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return(0,n.A)(e,t)}}},6166:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(2450),a=r(2158);function s(e,t,r){return(s=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,r){var n=[null];n.push.apply(n,t);var s=new(Function.bind.apply(e,n));return r&&(0,a.A)(s,r.prototype),s}:Reflect.construct.bind()).apply(null,arguments)}function i(e){var t="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,(0,n.A)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,a.A)(r,e)})(e)}},7037:(e,t,r)=>{"use strict";r.d(t,{BNo:()=>s,EcP:()=>a,Hu1:()=>i,NBi:()=>o});var n=r(5787);function a(e){return(0,n.k5)({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(e)}function s(e){return(0,n.k5)({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"},child:[]}]})(e)}function i(e){return(0,n.k5)({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 448H112c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h416c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm64-320c-26.5 0-48 21.5-48 48 0 7.1 1.6 13.7 4.4 19.8L476 239.2c-15.4 9.2-35.3 4-44.2-11.6L350.3 85C361 76.2 368 63 368 48c0-26.5-21.5-48-48-48s-48 21.5-48 48c0 15 7 28.2 17.7 37l-81.5 142.6c-8.9 15.6-28.9 20.8-44.2 11.6l-72.3-43.4c2.7-6 4.4-12.7 4.4-19.8 0-26.5-21.5-48-48-48S0 149.5 0 176s21.5 48 48 48c2.6 0 5.2-.4 7.7-.8L128 416h384l72.3-192.8c2.5.4 5.1.8 7.7.8 26.5 0 48-21.5 48-48s-21.5-48-48-48z"},child:[]}]})(e)}function o(e){return(0,n.k5)({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(e)}},5787:(e,t,r)=>{"use strict";r.d(t,{k5:()=>l});var n=r(7851),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=n.createContext&&n.createContext(a),i=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e){return t=>n.createElement(h,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function h(e){var t=t=>{var r,{attr:a,size:s,title:u}=e,l=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,i),h=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,l,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),u&&n.createElement("title",null,u),e.children)};return void 0!==s?n.createElement(s.Consumer,null,e=>t(e)):t(a)}},9269:(e,t,r)=>{"use strict";r.d(t,{l$:()=>eu,Ay:()=>ec});var n,a=r(7851),s=r(2963),i={data:""},o=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,u=/\/\*[^]*?\*\/|  +/g,c=/\n+/g,l=function e(t,r){var n="",a="",s="",i=function(i){var o=t[i];"@"==i[0]?"i"==i[1]?n=i+" "+o+";":a+="f"==i[1]?e(o,i):i+"{"+e(o,"k"==i[1]?"":r)+"}":"object"==typeof o?a+=e(o,r?r.replace(/([^,])+/g,function(e){return i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,function(t){return/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t})}):i):null!=o&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=e.p?e.p(i,o):i+":"+o+";")};for(var o in t)i(o);return n+(r&&s?r+"{"+s+"}":s)+a},h={},f=function e(t){if("object"==typeof t){var r="";for(var n in t)r+=n+e(t[n]);return r}return t},p=function(e,t,r,n,a){var i,p=f(e),d=h[p]||(h[p]=function(e){for(var t=0,r=11;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r}(p));if(!h[d]){var v=p!==e?e:function(e){for(var t,r,n=[{}];t=o.exec(e.replace(u,""));)t[4]?n.shift():t[3]?(r=t[3].replace(c," ").trim(),n.unshift(n[0][r]=n[0][r]||{})):n[0][t[1]]=t[2].replace(c," ").trim();return n[0]}(e);h[d]=l(a?(0,s.A)({},"@keyframes "+d,v):v,r?"":"."+d)}var b=r&&h.g?h.g:null;return r&&(h.g=h[d]),i=h[d],b?t.data=t.data.replace(b,i):-1===t.data.indexOf(i)&&(t.data=n?i+t.data:t.data+i),d};function d(e){var t,r,n,a=this||{},s=e.call?e(a.p):e;return p(s.unshift?s.raw?(r=[].slice.call(arguments,1),n=a.p,s.reduce(function(e,t,a){var s=r[a];if(s&&s.call){var i=s(n),o=i&&i.props&&i.props.className||/^go/.test(i)&&i;s=o?"."+o:i&&"object"==typeof i?i.props?"":l(i,""):!1===i?"":i}return e+t+(null==s?"":s)},"")):s.reduce(function(e,t){return Object.assign(e,t&&t.call?t(a.p):t)},{}):s,(t=a.target,"object"==typeof window?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||i),a.g,a.o,a.k)}d.bind({g:1});var v,b,y,g=d.bind({k:1});function m(e,t){var r=this||{};return function(){var n=arguments;function a(s,i){var o=Object.assign({},s),u=o.className||a.className;r.p=Object.assign({theme:b&&b()},o),r.o=/ *go\d+/.test(u),o.className=d.apply(r,n)+(u?" "+u:""),t&&(o.ref=i);var c=e;return e[0]&&(c=o.as||e,delete o.as),y&&c[0]&&y(o),v(c,o)}return t?t(a):a}}var k=e=>"function"==typeof e,w=(e,t)=>k(e)?e(t):e,x=(()=>{let e=0;return()=>(++e).toString()})(),_=(()=>{let e;return()=>{if(void 0===e&&"u">typeof window){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),A=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:r}=t;return A(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+a}))}}},E=[],S={toasts:[],pausedAt:void 0},O=e=>{S=A(S,e),E.forEach(e=>{e(S)})},T={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},j=(e={})=>{let[t,r]=(0,a.useState)(S),n=(0,a.useRef)(S);(0,a.useEffect)(()=>(n.current!==S&&r(S),E.push(r),()=>{let e=E.indexOf(r);e>-1&&E.splice(e,1)}),[]);let s=t.toasts.map(t=>{var r,n,a;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||T[t.type],style:{...e.style,...null==(a=e[t.type])?void 0:a.style,...t.style}}});return{...t,toasts:s}},P=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(null==r?void 0:r.id)||x()}),C=e=>(t,r)=>{let n=P(t,e,r);return O({type:2,toast:n}),n.id},R=(e,t)=>C("blank")(e,t);R.error=C("error"),R.success=C("success"),R.loading=C("loading"),R.custom=C("custom"),R.dismiss=e=>{O({type:3,toastId:e})},R.remove=e=>O({type:4,toastId:e}),R.promise=(e,t,r)=>{let n=R.loading(t.loading,{...r,...null==r?void 0:r.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let a=t.success?w(t.success,e):void 0;return a?R.success(a,{id:n,...r,...null==r?void 0:r.success}):R.dismiss(n),e}).catch(e=>{let a=t.error?w(t.error,e):void 0;a?R.error(a,{id:n,...r,...null==r?void 0:r.error}):R.dismiss(n)}),e};var I=(e,t)=>{O({type:1,toast:{id:e,height:t}})},N=()=>{O({type:5,time:Date.now()})},L=new Map,U=1e3,D=(e,t=U)=>{if(L.has(e))return;let r=setTimeout(()=>{L.delete(e),O({type:4,toastId:e})},t);L.set(e,r)},B=e=>{let{toasts:t,pausedAt:r}=j(e);(0,a.useEffect)(()=>{if(r)return;let e=Date.now(),n=t.map(t=>{if(t.duration===1/0)return;let r=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(r<0){t.visible&&R.dismiss(t.id);return}return setTimeout(()=>R.dismiss(t.id),r)});return()=>{n.forEach(e=>e&&clearTimeout(e))}},[t,r]);let n=(0,a.useCallback)(()=>{r&&O({type:6,time:Date.now()})},[r]),s=(0,a.useCallback)((e,r)=>{let{reverseOrder:n=!1,gutter:a=8,defaultPosition:s}=r||{},i=t.filter(t=>(t.position||s)===(e.position||s)&&t.height),o=i.findIndex(t=>t.id===e.id),u=i.filter((e,t)=>t<o&&e.visible).length;return i.filter(e=>e.visible).slice(...n?[u+1]:[0,u]).reduce((e,t)=>e+(t.height||0)+a,0)},[t]);return(0,a.useEffect)(()=>{t.forEach(e=>{if(e.dismissed)D(e.id,e.removeDelay);else{let t=L.get(e.id);t&&(clearTimeout(t),L.delete(e.id))}})},[t]),{toasts:t,handlers:{updateHeight:I,startPause:N,endPause:n,calculateOffset:s}}},M=g`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,z=g`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,F=g`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,q=m("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${M} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${z} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${F} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,J=g`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,H=m("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${J} 1s linear infinite;
`,K=g`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,W=g`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,G=m("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${K} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${W} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,V=m("div")`
  position: absolute;
`,$=m("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Y=g`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,X=m("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Y} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Z=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return void 0!==t?"string"==typeof t?a.createElement(X,null,t):t:"blank"===r?null:a.createElement($,null,a.createElement(H,{...n}),"loading"!==r&&a.createElement(V,null,"error"===r?a.createElement(q,{...n}):a.createElement(G,{...n})))},Q=e=>`
0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ee=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}
`,et=m("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,er=m("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,en=(e,t)=>{let r=e.includes("top")?1:-1,[n,a]=_()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Q(r),ee(r)];return{animation:t?`${g(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${g(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ea=a.memo(({toast:e,position:t,style:r,children:n})=>{let s=e.height?en(e.position||t||"top-center",e.visible):{opacity:0},i=a.createElement(Z,{toast:e}),o=a.createElement(er,{...e.ariaProps},w(e.message,e));return a.createElement(et,{className:e.className,style:{...s,...r,...e.style}},"function"==typeof n?n({icon:i,message:o}):a.createElement(a.Fragment,null,i,o))});n=a.createElement,l.p=void 0,v=n,b=void 0,y=void 0;var es=({id:e,className:t,style:r,onHeightUpdate:n,children:s})=>{let i=a.useCallback(t=>{if(t){let r=()=>{n(e,t.getBoundingClientRect().height)};r(),new MutationObserver(r).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return a.createElement("div",{ref:i,className:t,style:r},s)},ei=(e,t)=>{let r=e.includes("top"),n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:_()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...r?{top:0}:{bottom:0},...n}},eo=d`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,eu=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:u,handlers:c}=B(r);return a.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},u.map(r=>{let i=r.position||t,o=ei(i,c.calculateOffset(r,{reverseOrder:e,gutter:n,defaultPosition:t}));return a.createElement(es,{id:r.id,key:r.id,onHeightUpdate:c.updateHeight,className:r.visible?eo:"",style:o},"custom"===r.type?w(r.message,r):s?s(r):a.createElement(ea,{toast:r,position:i}))}))},ec=R}},e=>{var t=t=>e(e.s=t);e.O(0,[593,792],()=>(t(8424),t(1599))),_N_E=e.O()}]);