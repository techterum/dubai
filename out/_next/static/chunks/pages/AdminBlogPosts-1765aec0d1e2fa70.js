(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{8787:(e,t,r)=>{"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(4130)},4130:e=>{!function(){var t={229:function(e){var t,r,n,o=e.exports={};function a(){throw Error("setTimeout has not been defined")}function u(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(e){r=u}}();var i=[],c=!1,l=-1;function d(){c&&n&&(c=!1,n.length?i=n.concat(i):l=-1,i.length&&p())}function p(){if(!c){var e=s(d);c=!0;for(var t=i.length;t;){for(n=i,i=[];++l<t;)n&&n[l].run();l=-1,t=i.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new f(e,t)),1!==i.length||c||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={exports:{}},u=!0;try{t[e](a,a.exports,n),u=!1}finally{u&&delete r[e]}return a.exports}n.ab="//";var o=n(229);e.exports=o}()},9987:(e,t,r)=>{e.exports=r(5738)},9116:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/AdminBlogPosts",function(){return r(3036)}])},4554:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AmpStateContext",{enumerable:!0,get:function(){return n}});var n=r(5068)._(r(7851)).default.createContext({})},2338:(e,t)=>{"use strict";function r(e){var t=void 0===e?{}:e,r=t.ampFirst,n=t.hybrid,o=t.hasQuery;return void 0!==r&&r||void 0!==n&&n&&void 0!==o&&o}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return r}})},5738:(e,t,r)=>{"use strict";var n=r(8787),o=r(8881);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return b},defaultHead:function(){return m}});var u=r(5068),s=r(4455),i=r(1451),c=s._(r(7851)),l=u._(r(8573)),d=r(4554),p=r(7602),f=r(2338);function m(e){void 0===e&&(e=!1);var t=[(0,i.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,i.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function h(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===c.default.Fragment?e.concat(c.default.Children.toArray(t.props.children).reduce(function(e,t){return"string"==typeof t||"number"==typeof t?e:e.concat(t)},[])):e.concat(t)}r(4738);var g=["name","httpEquiv","charSet","itemProp"];function v(e,t){var r,u,s,i,l=t.inAmpMode;return e.reduce(h,[]).reverse().concat(m(l).reverse()).filter((r=new Set,u=new Set,s=new Set,i={},function(e){var t=!0,n=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){n=!0;var o=e.key.slice(e.key.indexOf("$")+1);r.has(o)?t=!1:r.add(o)}switch(e.type){case"title":case"base":u.has(e.type)?t=!1:u.add(e.type);break;case"meta":for(var a=0,c=g.length;a<c;a++){var l=g[a];if(e.props.hasOwnProperty(l)){if("charSet"===l)s.has(l)?t=!1:s.add(l);else{var d=e.props[l],p=i[l]||new Set;("name"!==l||!n)&&p.has(d)?t=!1:(p.add(d),i[l]=p)}}}}return t})).reverse().map(function(e,t){var r=e.key||t;if(n.env.__NEXT_OPTIMIZE_FONTS&&!l&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(function(t){return e.props.href.startsWith(t)})){var u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.props||{});return u["data-href"]=u.href,u.href=void 0,u["data-optimized-fonts"]=!0,c.default.cloneElement(e,u)}return c.default.cloneElement(e,{key:r})})}var b=function(e){var t=e.children,r=(0,c.useContext)(d.AmpStateContext),n=(0,c.useContext)(p.HeadManagerContext);return(0,i.jsx)(l.default,{reduceComponentsToState:v,headManager:n,inAmpMode:(0,f.isInAmpMode)(r),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8573:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});var n=r(7851),o=n.useLayoutEffect,a=n.useEffect;function u(e){var t=e.headManager,r=e.reduceComponentsToState;function u(){if(t&&t.mountedInstances){var o=n.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(r(o,e))}}return o(function(){var r;return null==t||null==(r=t.mountedInstances)||r.add(e.children),function(){var r;null==t||null==(r=t.mountedInstances)||r.delete(e.children)}}),o(function(){return t&&(t._pendingUpdate=u),function(){t&&(t._pendingUpdate=u)}}),a(function(){return t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),function(){t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)}}),null}},4738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return r}});var r=function(e){}},9165:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(7851).createElement;let o=function(){return n("div",{className:"flex justify-center items-center h-full"},n("div",{className:"loader ease-linear rounded-full border-8 border-t-8 border-gray-200 h-16 w-16"}))}},6883:(e,t,r)=>{"use strict";r.d(t,{V:()=>s});var n=r(5507),o=r(3003),a=r.n(o),u=r(8787),s=function(){var e=(0,n.A)(a().mark(function e(t){var r,n,o,s,i,c,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r="dmbabahte",n=u.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET||"ml_default",r){e.next=5;break}throw Error("Cloudinary cloud name is missing.");case 5:if(n){e.next=7;break}throw Error("Cloudinary upload preset is missing.");case 7:return(o=new FormData).append("file",t),o.append("upload_preset",n),e.next=12,fetch("https://api.cloudinary.com/v1_1/".concat(r,"/image/upload/"),{method:"POST",body:o});case 12:if((s=e.sent).ok){e.next=18;break}return e.next=16,s.json();case 16:throw c=e.sent,Error("Cloudinary Upload Failed: ".concat((null===(i=c.error)||void 0===i?void 0:i.message)||"Unknown error"));case 18:return e.next=20,s.json();case 20:return l=e.sent.secure_url.replace("/upload/","/upload/f_webp,q_auto:eco/"),e.abrupt("return",l);case 25:throw e.prev=25,e.t0=e.catch(0),console.error("Image Upload Error:",e.t0),e.t0;case 29:case"end":return e.stop()}},e,null,[[0,25]])}));return function(t){return e.apply(this,arguments)}}()},3036:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__N_SSG:()=>h,default:()=>g});var n=r(5507),o=r(3003),a=r.n(o),u=r(7851),s=r(5041),i=r(6883),c=r(9165),l=r(6392),d=r(9269),p=r(9987),f=r.n(p),m=u.createElement,h=!0;function g(e){var t,r,o,p=e.initialPosts,h=e.userId,g=(0,l.useRouter)(),v=(0,u.useState)(p),b=v[0],y=v[1],x=(0,u.useState)(!1),_=x[0],w=x[1],O=(0,u.useState)(""),P=O[0],k=O[1],E=(0,u.useState)(""),N=E[0],j=E[1],A=(0,u.useState)(null),T=A[0],S=A[1],C=(0,u.useState)(null),M=C[0],U=C[1];(0,u.useEffect)(function(){h||(d.Ay.error("You must be logged in to access the admin dashboard"),g.push("/AdminLogin"))},[h,g]);var I=(t=(0,n.A)(a().mark(function e(){var t,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,s.N.from("blog_posts").select("*").order("created_at",{ascending:!1});case 4:r=(t=e.sent).data,t.error?d.Ay.error("Error fetching blog posts"):y(r||[]);case 8:return e.prev=8,w(!1),e.finish(8);case 11:case"end":return e.stop()}},e,null,[[0,,8,11]])})),function(){return t.apply(this,arguments)}),L=(r=(0,n.A)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",h){e.next=4;break}return d.Ay.error("No user session found. Please log in again."),e.abrupt("return");case 4:if(!T){e.next=15;break}return e.prev=5,e.next=8,(0,i.V)(T);case 8:t=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),d.Ay.error("Error uploading image"),e.abrupt("return");case 15:if(!M){e.next=23;break}return e.next=18,s.N.from("blog_posts").update({title:P,content:N,image_url:t,updated_at:new Date().toISOString()}).eq("id",M);case 18:e.sent.error?d.Ay.error("Error updating post"):d.Ay.success("Post updated successfully"),e.next=28;break;case 23:return e.next=25,s.N.from("blog_posts").insert({title:P,content:N,image_url:t,author_id:h});case 25:e.sent.error?d.Ay.error("Error creating post"):d.Ay.success("Post created successfully");case 28:k(""),j(""),S(null),U(null),I();case 33:case"end":return e.stop()}},e,null,[[5,11]])})),function(){return r.apply(this,arguments)}),D=function(e){k(e.title),j(e.content),S(null),U(e.id)},F=(o=(0,n.A)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.N.from("blog_posts").delete().eq("id",t);case 2:e.sent.error?d.Ay.error("Error deleting post"):d.Ay.success("Post deleted successfully"),I();case 6:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)});return _?m(c.A,null):m(u.Fragment,null,m(f(),null,m("title",null,"Admin Blog Posts"),m("meta",{name:"description",content:"Manage blog posts in the admin dashboard."})),m("div",{className:"max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-xl text-gray-900"},m("h1",{className:"text-3xl font-bold mb-6 text-center"},"Manage Blog Posts"),m("div",{className:"mb-6 space-y-4 bg-gray-100 p-4 rounded-lg shadow"},m("input",{type:"text",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Title",value:P,onChange:function(e){return k(e.target.value)}}),m("textarea",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Content",value:N,onChange:function(e){return j(e.target.value)}}),m("input",{type:"file",accept:"image/*",onChange:function(e){var t;return S((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"w-full p-3 border rounded-lg bg-white"}),m("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",onClick:L},M?"Update Post":"Create Post")),m("div",{className:"space-y-4"},b.map(function(e){return m("div",{key:e.id,className:"p-6 bg-gray-100 rounded-lg shadow"},m("h2",{className:"text-2xl font-semibold mb-2"},e.title),e.image_url&&m("img",{src:e.image_url,alt:e.title,className:"mb-4 w-full h-64 object-cover rounded-lg"}),m("p",{className:"text-gray-700 mb-4"},e.content),m("div",{className:"flex space-x-4"},m("button",{className:"bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition",onClick:function(){return D(e)}},"Edit"),m("button",{className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition",onClick:function(){return F(e.id)}},"Delete")))}),0===b.length&&m("p",{className:"text-center text-gray-500"},"No blog posts found"))))}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(9116)),_N_E=e.O()}]);